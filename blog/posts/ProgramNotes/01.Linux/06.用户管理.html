<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>新建用户加入组</title>
    <meta name="description" content="新建用户加入组 - Hongwei Zhao's Blog">
    <meta name="author" content="Hongwei Zhao">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Noto+Sans+SC:wght@300;400;500;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Code Highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css" id="hljs-theme-dark">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css" id="hljs-theme-light" disabled>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    
    <!-- KaTeX for Math -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
    
    <style>
        :root {
            /* Light Theme - 明亮清新配色 */
            --primary-color: #4A90D9;
            --primary-hover: #3678C2;
            --link-color: #E86B5F;
            --text-color: #2D2D2D;
            --text-light: #5A5A5A;
            --text-muted: #8A8A8A;
            --bg-color: #FFFFFF;
            --bg-secondary: #F5F7FA;
            --bg-code: #F8F9FC;
            --border-color: #E8ECF0;
            --shadow: 0 2px 8px rgba(0,0,0,0.06);
            --shadow-lg: 0 8px 24px rgba(0,0,0,0.08);
        }

        [data-theme="dark"] {
            --primary-color: #5dade2;
            --primary-hover: #85c1e9;
            --link-color: #e74c3c;
            --text-color: #e5e7eb;
            --text-light: #9ca3af;
            --text-muted: #6b7280;
            --bg-color: #1a1a2e;
            --bg-secondary: #16213e;
            --bg-code: #0f0f23;
            --border-color: #374151;
            --shadow: 0 1px 3px rgba(0,0,0,0.3);
            --shadow-lg: 0 4px 15px rgba(0,0,0,0.4);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', 'Noto Sans SC', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            font-size: 16px;
            line-height: 1.8;
            color: var(--text-color);
            background: var(--bg-color);
            transition: background-color 0.3s, color 0.3s;
        }

        a {
            color: var(--primary-color);
            text-decoration: none;
            transition: color 0.2s;
        }

        a:hover {
            color: var(--primary-hover);
            text-decoration: underline;
        }

        /* Layout */
        .page-wrapper {
            display: flex;
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
            gap: 3rem;
        }

        /* Sidebar TOC */
        .toc-sidebar {
            width: 260px;
            flex-shrink: 0;
            position: sticky;
            top: 2rem;
            height: fit-content;
            max-height: calc(100vh - 4rem);
            overflow-y: auto;
        }

        .toc-container {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 1.5rem;
            border: 1px solid var(--border-color);
        }

        .toc-container h3 {
            font-size: 0.85rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-muted);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .toc-container ul {
            list-style: none;
        }

        .toc-container li {
            margin-bottom: 0.5rem;
        }

        .toc-container a {
            font-size: 0.9rem;
            color: var(--text-light);
            display: block;
            padding: 0.25rem 0;
            border-left: 2px solid transparent;
            padding-left: 0.75rem;
            transition: all 0.2s;
        }

        .toc-container a:hover,
        .toc-container a.active {
            color: var(--primary-color);
            border-left-color: var(--primary-color);
            text-decoration: none;
        }

        .toc-container ul ul {
            margin-left: 1rem;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            min-width: 0;
            max-width: 800px;
        }

        /* Header */
        .post-header {
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid var(--border-color);
        }

        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
            color: var(--text-light);
            margin-bottom: 1.5rem;
        }

        .back-link:hover {
            color: var(--primary-color);
            text-decoration: none;
        }

        .post-header h1 {
            font-size: 2.25rem;
            font-weight: 700;
            line-height: 1.3;
            margin-bottom: 1rem;
            color: var(--text-color);
        }

        .post-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 1.5rem;
            font-size: 0.9rem;
            color: var(--text-light);
        }

        .post-meta span {
            display: flex;
            align-items: center;
            gap: 0.4rem;
        }

        .post-meta i {
            color: var(--text-muted);
        }

        .tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .tag {
            display: inline-block;
            font-size: 0.8rem;
            background: var(--bg-secondary);
            color: var(--text-light);
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            border: 1px solid var(--border-color);
            transition: all 0.2s;
        }

        .tag:hover {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        /* Article Content */
        .post-content {
            font-size: 1rem;
            line-height: 1.9;
        }

        .post-content h1,
        .post-content h2,
        .post-content h3,
        .post-content h4,
        .post-content h5,
        .post-content h6 {
            margin-top: 2rem;
            margin-bottom: 1rem;
            font-weight: 600;
            line-height: 1.4;
            color: var(--text-color);
        }

        .post-content h1 { font-size: 1.875rem; }
        .post-content h2 { 
            font-size: 1.5rem; 
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--border-color);
        }
        .post-content h3 { font-size: 1.25rem; }
        .post-content h4 { font-size: 1.125rem; }

        .post-content p {
            margin-bottom: 1.25rem;
        }

        .post-content ul,
        .post-content ol {
            margin: 1.25rem 0;
            padding-left: 1.5rem;
        }

        .post-content li {
            margin-bottom: 0.5rem;
        }

        .post-content blockquote {
            margin: 1.5rem 0;
            padding: 1rem 1.5rem;
            background: var(--bg-secondary);
            border-left: 4px solid var(--primary-color);
            border-radius: 0 8px 8px 0;
            color: var(--text-light);
            font-style: italic;
        }

        .post-content blockquote p:last-child {
            margin-bottom: 0;
        }

        /* Code */
        .post-content code {
            font-family: 'JetBrains Mono', 'Fira Code', Consolas, monospace;
            font-size: 0.9em;
            background: var(--bg-code);
            padding: 0.2em 0.4em;
            border-radius: 4px;
            color: var(--link-color);
        }

        .post-content pre {
            margin: 1.5rem 0;
            padding: 1.25rem;
            background: var(--bg-code);
            border-radius: 10px;
            overflow-x: auto;
            border: 1px solid var(--border-color);
        }

        .post-content pre code {
            background: none;
            padding: 0;
            color: inherit;
            font-size: 0.875rem;
            line-height: 1.6;
        }

        /* Images */
        .post-content img {
            max-width: 100%;
            height: auto;
            border-radius: 10px;
            margin: 1.5rem 0;
            box-shadow: var(--shadow-lg);
        }

        /* Tables */
        .post-content table {
            width: 100%;
            margin: 1.5rem 0;
            border-collapse: collapse;
            font-size: 0.95rem;
        }

        .post-content th,
        .post-content td {
            padding: 0.75rem 1rem;
            border: 1px solid var(--border-color);
            text-align: left;
        }

        .post-content th {
            background: var(--bg-secondary);
            font-weight: 600;
        }

        .post-content tr:nth-child(even) {
            background: var(--bg-secondary);
        }

        /* Math */
        .math-display {
            margin: 1.5rem 0;
            overflow-x: auto;
            padding: 1rem;
            background: var(--bg-secondary);
            border-radius: 8px;
        }

        /* Anchor links */
        .anchor-link {
            opacity: 0;
            margin-left: 0.5rem;
            color: var(--text-muted);
            font-weight: 400;
            transition: opacity 0.2s;
        }

        .post-content h2:hover .anchor-link,
        .post-content h3:hover .anchor-link,
        .post-content h4:hover .anchor-link {
            opacity: 1;
        }

        /* Theme Toggle */
        .theme-toggle {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--primary-color);
            color: white;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
            box-shadow: var(--shadow-lg);
            transition: transform 0.2s, background 0.2s;
            z-index: 1000;
        }

        .theme-toggle:hover {
            transform: scale(1.1);
            background: var(--primary-hover);
        }

        /* Comments Section */
        .comments-section {
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 1px solid var(--border-color);
        }

        .comments-section h3 {
            font-size: 1.25rem;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Footer */
        .post-footer {
            margin-top: 3rem;
            padding-top: 1.5rem;
            border-top: 1px solid var(--border-color);
            text-align: center;
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .toc-sidebar {
                display: none;
            }
            
            .page-wrapper {
                padding: 1.5rem;
            }
        }

        @media (max-width: 768px) {
            .post-header h1 {
                font-size: 1.75rem;
            }
            
            .post-meta {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .theme-toggle {
                bottom: 1rem;
                right: 1rem;
                width: 44px;
                height: 44px;
            }
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-secondary);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--text-muted);
        }
    </style>
</head>
<body>
    <div class="page-wrapper">
        <!-- TOC Sidebar -->
        <aside class="toc-sidebar">
            <div class="toc-container">
                <h3><i class="fas fa-list"></i> 目录</h3>
                <div class="toc">
<ul>
<li><a href="#1-linux-用户管理要点">1. Linux 用户管理要点</a></li>
<li><a href="#2-命令常见用法">2. 命令常见用法</a><ul>
<li><a href="#21-groupadd">2.1. groupadd</a></li>
<li><a href="#22-groupdel">2.2. groupdel</a></li>
<li><a href="#23-groupmod">2.3. groupmod</a></li>
<li><a href="#24-useradd">2.4. useradd</a></li>
<li><a href="#25-userdel">2.5. userdel</a></li>
<li><a href="#26-usermod">2.6. usermod</a></li>
<li><a href="#27-passwd">2.7. passwd</a></li>
<li><a href="#28-su">2.8. su</a></li>
<li><a href="#29-sudo">2.9. sudo</a><ul>
<li><a href="#291-给普通用户授权-sudo">2.9.1. 给普通用户授权 sudo</a></li>
<li><a href="#292-免密码授权-sudo">2.9.2. 免密码授权 sudo</a></li>
</ul>
</li>
<li><a href="#关键配置文件">关键配置文件</a></li>
</ul>
</li>
<li><a href="#创建删除设置用户">创建删除设置用户</a></li>
<li><a href="#查询切换用户">查询切换用户</a></li>
<li><a href="#用户组">用户组</a><ul>
<li><a href="#增加删除组创建特定组的用户">增加/删除组、创建特定组的用户</a></li>
<li><a href="#用户和组的相关文件">用户和组的相关文件</a></li>
</ul>
</li>
</ul>
</div>

            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <article>
                <header class="post-header">
                    <a href="../../../index.html" class="back-link">
                        <i class="fas fa-arrow-left"></i> 返回博客列表
                    </a>
                    <h1>新建用户加入组</h1>
                    <div class="post-meta">
                        <span><i class="fas fa-calendar-alt"></i> 2026-02-04</span>
                        <span><i class="fas fa-folder"></i> ProgramNotes/01.Linux</span>
                        <span><i class="fas fa-user"></i> Hongwei Zhao</span>
                    </div>
                    <div class="tags">
                        
                    </div>
                </header>

                <div class="post-content">
                    <blockquote>
<p>关键词：<code>groupadd</code>, <code>groupdel</code>, <code>groupmod</code>, <code>useradd</code>, <code>userdel</code>, <code>usermod</code>, <code>passwd</code>, <code>su</code>, <code>sudo</code></p>
</blockquote>
<h2 id="1-linux-用户管理要点">1. Linux 用户管理要点<a class="anchor-link" href="#1-linux-用户管理要点" title="Permanent link">&para;</a></h2>
<ul>
<li>创建用户组 - 使用 <a href="#groupadd">groupadd</a></li>
<li>删除用户组 - 使用 <a href="#groupdel">groupdel</a></li>
<li>修改用户组信息 - 使用 <a href="#groupmod">groupmod</a></li>
<li>创建用户 - 使用 <a href="#useradd">useradd</a></li>
<li>删除用户 - 使用 <a href="#userdel">userdel</a></li>
<li>修改用户信息 - 使用 <a href="#usermod">usermod</a></li>
<li>设置用户认证信息 - 使用 <a href="#passwd">passwd</a></li>
<li>切换用户 - 使用 <a href="#su">su</a></li>
<li>当前用户想执行没有权限执行的命令时，使用其他用户身份去执行 - 使用 <a href="#sudo">sudo</a></li>
</ul>
<hr />
<h2 id="2-命令常见用法">2. 命令常见用法<a class="anchor-link" href="#2-命令常见用法" title="Permanent link">&para;</a></h2>
<h3 id="21-groupadd">2.1. groupadd<a class="anchor-link" href="#21-groupadd" title="Permanent link">&para;</a></h3>
<blockquote>
<p>groupadd 命令用于创建一个新的用户组，新用户组的信息将被添加到系统文件中。<br />
</p>
</blockquote>
<p><strong>常用选项</strong>：  </p>
<ul>
<li><code>-g GID</code>：指定组 ID（默认自动分配）。  </li>
<li><code>-r</code>：创建系统组（ID 范围通常为 0-999）。  </li>
<li><code>-f</code>：强制创建（组已存在时忽略错误）。  </li>
</ul>
<p><strong>示例</strong>：  </p>
<pre><code class="language-bash">groupadd -g 1000 developers  # 创建组 ID 为 1000 的组 &quot;developers&quot;
groupadd -r systemgroup      # 创建系统组
</code></pre>
<hr />
<h3 id="22-groupdel">2.2. groupdel<a class="anchor-link" href="#22-groupdel" title="Permanent link">&para;</a></h3>
<blockquote>
<p>groupdel 命令用于删除指定的用户组，本命令要修改的系统文件包括 <code>/ect/group</code> 和 <code>/ect/gshadow</code>。若该群组中仍包括某些用户，则必须先删除这些用户后，方能删除群组。<br />
</p>
</blockquote>
<p>示例：</p>
<pre><code class="language-bash">$ groupadd damon  # 创建damon用户组
$ groupdel damon  # 删除这个用户组
</code></pre>
<hr />
<h3 id="23-groupmod">2.3. groupmod<a class="anchor-link" href="#23-groupmod" title="Permanent link">&para;</a></h3>
<p><strong>用途</strong>：修改组属性（如组名或 GID）。<br />
<strong>语法</strong>：  </p>
<pre><code class="language-bash">groupmod [选项] 组名
</code></pre>
<p><strong>常用选项</strong>：  </p>
<ul>
<li><code>-g GID</code>：修改组 ID。  </li>
<li><code>-n 新组名</code>：重命名组。  </li>
</ul>
<p><strong>示例</strong>：  </p>
<pre><code class="language-bash">groupmod -g 1001 developers  # 修改组 ID 为 1001
groupmod -n devs developers  # 将组名从 &quot;developers&quot; 改为 &quot;devs&quot;
</code></pre>
<hr />
<h3 id="24-useradd">2.4. useradd<a class="anchor-link" href="#24-useradd" title="Permanent link">&para;</a></h3>
<blockquote>
<p>useradd 命令用于 Linux 中创建的新的系统用户。useradd 可用来建立用户帐号。帐号建好之后，再用 passwd 设定帐号的密码．而可用 userdel 删除帐号。使用 useradd 指令所建立的帐号，实际上是保存在 <code>/etc/passwd</code> 文本文件中。</p>
</blockquote>
<p><strong>语法</strong>：  </p>
<pre><code class="language-bash">useradd [选项] 用户名
</code></pre>
<p><strong>常用选项</strong>：  </p>
<ul>
<li><code>-u UID</code>：指定用户 ID。  </li>
<li><code>-g 组名</code>：指定主组（需已存在）。  </li>
<li><code>-G 附加组</code>：指定附加组（逗号分隔）。  </li>
<li><code>-d 目录</code>：设置家目录（默认<code>/home/用户名</code>）。  </li>
<li><code>-s shell</code>：指定登录 Shell（如<code>/bin/bash</code>）。  </li>
<li><code>-m</code>：自动创建家目录（<code>-k</code> 可指定模板目录）。  </li>
<li><code>-r</code>：创建系统用户（无家目录）。 </li>
</ul>
<p>示例：</p>
<pre><code class="language-bash"># 新建用户加入组
$ useradd –g sales jack –G company,employees    # -g：加入主要组、-G：加入次要组

# 建立一个新用户账户，并设置 ID
$ useradd caojh -u 544

useradd -u 1001 -g developers -G docker,web -m -s /bin/bash alice
# 创建用户 alice，UID=1001，主组为 developers，附加组为 docker 和 web，自动创建家目录
</code></pre>
<h3 id="25-userdel">2.5. userdel<a class="anchor-link" href="#25-userdel" title="Permanent link">&para;</a></h3>
<blockquote>
<p>userdel 命令用于删除给定的用户，以及与用户相关的文件。若不加选项，则仅删除用户帐号，而不删除相关文件。</p>
</blockquote>
<p><strong>语法</strong>：  </p>
<pre><code class="language-bash">userdel [选项] 用户名
</code></pre>
<p><strong>常用选项</strong>：  </p>
<ul>
<li><code>-r</code>：同时删除家目录和邮件池。</li>
</ul>
<p>示例：</p>
<p>userdel 命令很简单，比如我们现在有个用户 linuxde，其 home 目录位于<code>/var</code>目录中，现在我们来删除这个用户：</p>
<pre><code class="language-bash">$ userdel linuxde       # 删除用户linuxde，但不删除其家目录及文件；
$ userdel -r linuxde    # 删除用户linuxde，其 home 目录及文件一并删除；
</code></pre>
<h3 id="26-usermod">2.6. usermod<a class="anchor-link" href="#26-usermod" title="Permanent link">&para;</a></h3>
<blockquote>
<p>usermod 命令用于修改用户的基本信息。usermod 命令不允许你改变正在线上的使用者帐号名称。当 usermod 命令用来改变 user id，必须确认这名 user 没在电脑上执行任何程序。你需手动更改使用者的 crontab 档。也需手动更改使用者的 at 工作档。采用 NIS server 须在 server 上更动相关的 NIS 设定。</p>
</blockquote>
<p><strong>语法</strong>：  </p>
<pre><code class="language-bash">usermod [选项] 用户名
</code></pre>
<p><strong>常用选项</strong>：  </p>
<ul>
<li><code>-l 新用户名</code>：修改用户名。  </li>
<li><code>-g 组名</code>：修改主组。  </li>
<li><code>-G 附加组</code>：覆盖原有附加组（用<code>-aG</code>追加附加组）。  </li>
<li><code>-L</code>：锁定用户（禁用登录）。  </li>
<li><code>-U</code>：解锁用户。  </li>
</ul>
<p>示例：</p>
<pre><code class="language-bash"># 将 newuser2 添加到组 staff 中
$ usermod -G staff newuser2

# 修改 newuser 的用户名为 newuser1
$ usermod -l newuser1 newuser

# 锁定账号 newuser1
$ usermod -L newuser1

# 解除对 newuser1 的锁定
$ usermod -U newuser1

usermod -l alice_new alice      # 将用户名从 alice 改为 alice_new
usermod -aG sudo alice         # 将 alice 追加到 sudo 组
usermod -L alice               # 锁定 alice 账户
</code></pre>
<h3 id="27-passwd">2.7. passwd<a class="anchor-link" href="#27-passwd" title="Permanent link">&para;</a></h3>
<blockquote>
<p>passwd 命令用于设置用户的认证信息，包括用户密码、密码过期时间等。系统管理者则能用它管理系统用户的密码。只有管理者可以指定用户名称，一般用户只能变更自己的密码。</p>
</blockquote>
<p><strong>语法</strong>：  </p>
<pre><code class="language-bash">passwd [选项] [用户名]
</code></pre>
<p><strong>常用选项</strong>：  </p>
<ul>
<li><code>-l</code>：锁定用户密码。  </li>
<li><code>-u</code>：解锁用户密码。  </li>
<li><code>-e</code>：强制用户下次登录修改密码。  </li>
<li><code>-d</code>：删除密码（危险！允许无密码登录）。</li>
</ul>
<p><strong>示例</strong>：</p>
<pre><code class="language-bash"># 如果是普通用户执行 passwd 只能修改自己的密码。
# 如果新建用户后，要为新用户创建密码，则用 passwd 用户名，注意要以 root 用户的权限来创建。
$ passwd linuxde    # 更改或创建linuxde用户的密码；
Changing password for user linuxde.
New UNIX password:          # 请输入新密码；
Retype new UNIX password:   # 再输入一次；
passwd: all authentication tokens updated successfully. # 成功；

# 普通用户如果想更改自己的密码，直接运行 passwd 即可，比如当前操作的用户是 linuxde。
$ passwd
Changing password for user linuxde. # 更改linuxde用户的密码；
(current) UNIX password:   # 请输入当前密码；
New UNIX password:         # 请输入新密码；
Retype new UNIX password:  # 确认新密码；
passwd: all authentication tokens updated successfully. # 更改成功；

# 比如我们让某个用户不能修改密码，可以用`-l`选项来锁定：
$ passwd -l linuxde    # 锁定用户linuxde不能更改密码；
Locking password for user linuxde.
passwd: Success           # 锁定成功；

$ su linuxde   # 通过su切换到linuxde用户；
$ passwd      # linuxde来更改密码；
Changing password for user linuxde.
Changing password for linuxde
(current) UNIX password:          # 输入linuxde的当前密码；
passwd: Authentication token manipulation error     # 失败，不能更改密码；

$ passwd -d linuxde  # 清除linuxde用户密码；
Removing password for user linuxde.
passwd: Success                         # 清除成功；

$ passwd -S linuxde    # 查询linuxde用户密码状态；
Empty password.                         # 空密码，也就是没有密码；
</code></pre>
<h3 id="28-su">2.8. su<a class="anchor-link" href="#28-su" title="Permanent link">&para;</a></h3>
<blockquote>
<p>su 命令用于切换当前用户身份到其他用户身份，变更时须输入所要变更的用户帐号与密码。</p>
</blockquote>
<p><strong>语法</strong>：  </p>
<pre><code class="language-bash">su [选项] [用户名]
</code></pre>
<p><strong>常用选项</strong>：  </p>
<ul>
<li><code>-</code> 或 <code>-l</code>：模拟登录（加载目标用户的环境变量）。  </li>
<li><code>-c 命令</code>：以目标用户执行单条命令后退出。</li>
</ul>
<p>示例：</p>
<pre><code class="language-bash"># 变更帐号为 root 并在执行 ls 指令后退出变回原使用者：
$ su -c ls root

# 变更帐号为 root 并传入`-f`选项给新执行的 shell：
$ su root -f

# 变更帐号为 test 并改变工作目录至 test 的家目录：
$ su -test
</code></pre>
<h3 id="29-sudo">2.9. sudo<a class="anchor-link" href="#29-sudo" title="Permanent link">&para;</a></h3>
<blockquote>
<p>sudo 命令用来以其他身份来执行命令，预设的身份为 root。在 <code>/etc/sudoers</code> 中设置了可执行 sudo 指令的用户。若其未经授权的用户企图使用 sudo，则会发出警告的邮件给管理员。用户使用 sudo 时，必须先输入密码，之后有 5 分钟的有效期限，超过期限则必须重新输入密码。</p>
</blockquote>
<p><strong>语法</strong>：  </p>
<pre><code class="language-bash">sudo [选项] 命令
</code></pre>
<p><strong>常用选项</strong>：  </p>
<ul>
<li><code>-u 用户名</code>：以指定用户身份执行（默认为 root）。  </li>
<li><code>-i</code>：模拟目标用户的登录环境。  </li>
<li><code>-l</code>：列出当前用户的 sudo 权限。 </li>
</ul>
<p>示例：</p>
<pre><code class="language-bash"># 指定用户执行命令
$ sudo -u userb ls -l
# 列出目前的权限
$ sudo -l
# 显示sudo设置
$ sudo -L
sudo apt update              # 以 root 身份更新软件包
sudo -u alice touch /tmp/test  # 以 alice 身份创建文件
sudo -i                      # 切换到 root 的登录环境
</code></pre>
<h4 id="291-给普通用户授权-sudo">2.9.1. 给普通用户授权 sudo<a class="anchor-link" href="#291-给普通用户授权-sudo" title="Permanent link">&para;</a></h4>
<p>假设要给普通用户 mary 配置 sudo 权限：</p>
<ol>
<li><code>/etc/sudoers</code> 文件存放了 sudo 的相关用户，但是默认是没有写权限的，所以需要设为可写：<code>chmod u+w /etc/sudoers</code></li>
<li>在该文件中添加 <code>mary ALL=(ALL) ALL</code> ，保存并退出，让 mary 具有 sudo 的所有权限</li>
<li>再将 <code>/etc/sudoers</code> 的权限恢复到默认状态：<code>chmod u-w /etc/sudoers</code></li>
</ol>
<h4 id="292-免密码授权-sudo">2.9.2. 免密码授权 sudo<a class="anchor-link" href="#292-免密码授权-sudo" title="Permanent link">&para;</a></h4>
<p>与给普通用户授权 sudo 类似，区别仅在于第 2 步：<code>mary ALL=(ALL) NOPASSWD: ALL</code>。</p>
<h3 id="关键配置文件"><strong>关键配置文件</strong><a class="anchor-link" href="#关键配置文件" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>用户信息</strong>：<code>/etc/passwd</code>  </li>
<li><strong>密码哈希</strong>：<code>/etc/shadow</code>  </li>
<li><strong>组信息</strong>：<code>/etc/group</code>  </li>
<li><strong>sudo 权限</strong>：<code>/etc/sudoers</code>（使用<code>visudo</code>编辑）  </li>
</ul>
<hr />
<p>以下为韩顺平老师讲解</p>
<h2 id="创建删除设置用户">创建删除设置用户<a class="anchor-link" href="#创建删除设置用户" title="Permanent link">&para;</a></h2>
<ul>
<li>
<p>Linux 系统是一个多用户多任务的操作系统，任何一个想要使用系统资源的用户，都必须首先向系统管理员 root 申请一个账号，然后再以这个账号的身份进入系统。</p>
</li>
<li>
<p>添加用户默认该用户的家目录在<code>/home/username</code>，username 是用户的名称，也可以指定目录，但没必要</p>
</li>
</ul>
<p><code>bash
  useradd milan #添加milan这个用户
  passwd milan #更改milan这个用户的密码
  userdel milan #删除用户milan，但是保留home家目录
  userdel -r milan #删除用户milan的所有信息，包括家目录</code></p>
<ul>
<li>
<p>关于保留家目录的讨论</p>
</li>
<li>
<p>建议保留</p>
</li>
<li>
<p>除非不再需要该用户的任何贡献代码、记录</p>
</li>
<li>
<p><code>pwd</code>：该命令显示当前所在目录全程</p>
</li>
</ul>
<h2 id="查询切换用户">查询切换用户<a class="anchor-link" href="#查询切换用户" title="Permanent link">&para;</a></h2>
<ul>
<li>查询基本语法——<code>id 用户名</code>；当不存在改用户时，返回无此用户。</li>
</ul>
<p><code>shell
  [root@iZbp1978lespq45h0qv20aZ home]# id jack
  id: jack: no such user
  [root@iZbp1978lespq45h0qv20aZ home]# id root
  uid=0(root) gid=0(root) groups=0(root)
  [root@iZbp1978lespq45h0qv20aZ home]# id milan
  uid=1000(milan) gid=1000(milan) groups=1000(milan)
  [root@iZbp1978lespq45h0qv20aZ home]#</code></p>
<ul>
<li>
<p>切换基本语法——<code>su 用户名</code>；<code>exit</code>返回原用户；从权限高的用户切换到权限低的用户，不需要密码；反之需要。</p>
</li>
<li>
<p>查看当前登录用户语法——<code>whoami</code>或者<code>who am i</code>。值得注意的是<code>whoami</code>返回当前使用的用户，<code>who am i</code>返回第一次登录服务器的信息。</p>
</li>
</ul>
<p><code>bash
  [root@iZbp1978lespq45h0qv20aZ home]# ls
  milan
  [root@iZbp1978lespq45h0qv20aZ home]# su milan
  [milan@iZbp1978lespq45h0qv20aZ home]$ whoami
  milan
  [milan@iZbp1978lespq45h0qv20aZ home]$ exit
  exit
  [root@iZbp1978lespq45h0qv20aZ home]# whoami
  root
  [root@iZbp1978lespq45h0qv20aZ home]# who am i
  root     pts/0        2022-02-20 16:45 (43.227.139.42)
  [root@iZbp1978lespq45h0qv20aZ home]# su milan
  [milan@iZbp1978lespq45h0qv20aZ home]$ who am i
  root     pts/0        2022-02-20 16:45 (43.227.139.42)
  [milan@iZbp1978lespq45h0qv20aZ home]$ whoami
  milan
  [milan@iZbp1978lespq45h0qv20aZ home]$ exit
  exit
  [root@iZbp1978lespq45h0qv20aZ home]#</code></p>
<h2 id="用户组">用户组<a class="anchor-link" href="#用户组" title="Permanent link">&para;</a></h2>
<h3 id="增加删除组创建特定组的用户">增加/删除组、创建特定组的用户<a class="anchor-link" href="#增加删除组创建特定组的用户" title="Permanent link">&para;</a></h3>
<p><img alt="" src="https://markdownimg-hw.oss-cn-beijing.aliyuncs.com/imageSnipaste_2022-02-20_17-24-00.png" /></p>
<ul>
<li>移动用户到另外的组</li>
</ul>
<p><img alt="" src="https://markdownimg-hw.oss-cn-beijing.aliyuncs.com/imageSnipaste_2022-02-20_17-26-49.png" /></p>
<ul>
<li>示例</li>
</ul>
<p>```bash<br />
  [root@iZbp1978lespq45h0qv20aZ home]# groupadd wudang<br />
  [root@iZbp1978lespq45h0qv20aZ home]# groupdel wudang<br />
  [root@iZbp1978lespq45h0qv20aZ home]# ls<br />
  milan<br />
  [root@iZbp1978lespq45h0qv20aZ home]# groupadd wudang<br />
  [root@iZbp1978lespq45h0qv20aZ home]# useradd -g wudang zwj<br />
  [root@iZbp1978lespq45h0qv20aZ home]# ls<br />
  milan  zwj<br />
  [root@iZbp1978lespq45h0qv20aZ home]# id zwj<br />
  uid=1001(zwj) gid=1001(wudang) groups=1001(wudang)<br />
  [root@iZbp1978lespq45h0qv20aZ home]# groupadd mojiao<br />
  [root@iZbp1978lespq45h0qv20aZ home]# usermod -g mojiao zwj<br />
  [root@iZbp1978lespq45h0qv20aZ home]# id zwj<br />
  uid=1001(zwj) gid=1002(mojiao) groups=1002(mojiao)<br />
  [root@iZbp1978lespq45h0qv20aZ home]#</p>
<p>```</p>
<h3 id="用户和组的相关文件">用户和组的相关文件<a class="anchor-link" href="#用户和组的相关文件" title="Permanent link">&para;</a></h3>
<ul>
<li><code>cat /etc/group</code>：查看所有的组，一般大于 1000 是自定义；</li>
<li><code>cat /etc/passwd</code>：查看所有的用户及其相关信息。</li>
</ul>
<p><img alt="" src="https://markdownimg-hw.oss-cn-beijing.aliyuncs.com/imageSnipaste_2022-02-20_17-30-23.png" /></p>
<ul>
<li>
<p>登录 shell 的含义</p>
</li>
<li>
<p>shell 是你（用户）和 Linux（或者更准确的说，是你和 Linux 内核）之间的接口程序。你在提示符下输入的每个命令都由 shell 先解释然后传给 Linux 内核。也称 shell 为外壳。</p>
</li>
<li>shell 是一个命令语言解释器（command-language interpreter）。拥有自己内建的 shell 命令集。此外，shell 也能被系统中其他有效的 Linux 实用程序和应用程序（utilities and application programs）所调用。</li>
<li>
<p>bash 是 shell 的一种，是大多数 Linux 发行版默认的 shell，除 bash shell 外还有 c shell 等其它类型的 shell。</p>
<p><img alt="" src="https://markdownimg-hw.oss-cn-beijing.aliyuncs.com/imageSnipaste_2022-02-20_17-35-13.png" /></p>
</li>
</ul>
                </div>

                <!-- Comments Section (Giscus) -->
                <section class="comments-section">
                    <h3><i class="fas fa-comments"></i> 评论</h3>
                    <script src="https://giscus.app/client.js"
                        data-repo="Geeks-Z/Geeks-Z.github.io"
                        data-repo-id=""
                        data-category="Announcements"
                        data-category-id=""
                        data-mapping="pathname"
                        data-strict="0"
                        data-reactions-enabled="1"
                        data-emit-metadata="0"
                        data-input-position="bottom"
                        data-theme="preferred_color_scheme"
                        data-lang="zh-CN"
                        crossorigin="anonymous"
                        async>
                    </script>
                </section>
            </article>

            <footer class="post-footer">
                <p>© 2025 Hongwei Zhao. Built with ❤️</p>
            </footer>
        </main>
    </div>

    <!-- Theme Toggle Button -->
    <button class="theme-toggle" id="themeToggle" aria-label="切换主题">
        <i class="fas fa-moon"></i>
    </button>

    <script>
        // Theme Toggle
        const themeToggle = document.getElementById('themeToggle');
        const html = document.documentElement;
        const icon = themeToggle.querySelector('i');
        const hljsDark = document.getElementById('hljs-theme-dark');
        const hljsLight = document.getElementById('hljs-theme-light');
        
        // Check saved theme or system preference
        const savedTheme = localStorage.getItem('theme');
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        
        if (savedTheme === 'dark' || (!savedTheme && prefersDark)) {
            html.setAttribute('data-theme', 'dark');
            icon.className = 'fas fa-sun';
            hljsDark.disabled = false;
            hljsLight.disabled = true;
        }
        
        themeToggle.addEventListener('click', () => {
            const isDark = html.getAttribute('data-theme') === 'dark';
            if (isDark) {
                html.removeAttribute('data-theme');
                icon.className = 'fas fa-moon';
                localStorage.setItem('theme', 'light');
                hljsDark.disabled = true;
                hljsLight.disabled = false;
            } else {
                html.setAttribute('data-theme', 'dark');
                icon.className = 'fas fa-sun';
                localStorage.setItem('theme', 'dark');
                hljsDark.disabled = false;
                hljsLight.disabled = true;
            }
            
            // Update Giscus theme
            const giscusFrame = document.querySelector('iframe.giscus-frame');
            if (giscusFrame) {
                giscusFrame.contentWindow.postMessage({
                    giscus: {
                        setConfig: {
                            theme: isDark ? 'light' : 'dark'
                        }
                    }
                }, 'https://giscus.app');
            }
        });
        
        // Highlight.js
        document.addEventListener('DOMContentLoaded', () => {
            hljs.highlightAll();
        });
        
        // KaTeX auto-render
        document.addEventListener('DOMContentLoaded', () => {
            if (typeof renderMathInElement !== 'undefined') {
                renderMathInElement(document.body, {
                    delimiters: [
                        {left: '$$', right: '$$', display: true},
                        {left: '$', right: '$', display: false},
                        {left: '\\[', right: '\\]', display: true},
                        {left: '\\(', right: '\\)', display: false}
                    ],
                    throwOnError: false
                });
            }
        });
        
        // TOC active state
        const tocLinks = document.querySelectorAll('.toc-container a');
        const headings = document.querySelectorAll('.post-content h2, .post-content h3, .post-content h4');
        
        function updateTocActive() {
            let current = '';
            headings.forEach(heading => {
                const rect = heading.getBoundingClientRect();
                if (rect.top <= 100) {
                    current = heading.getAttribute('id');
                }
            });
            
            tocLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === '#' + current) {
                    link.classList.add('active');
                }
            });
        }
        
        window.addEventListener('scroll', updateTocActive);
        updateTocActive();
    </script>
</body>
</html>
