<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Untitled</title>
    <meta name="description" content="Untitled - Hongwei Zhao's Blog">
    <meta name="author" content="Hongwei Zhao">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Noto+Sans+SC:wght@300;400;500;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Code Highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css" id="hljs-theme-dark">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css" id="hljs-theme-light" disabled>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    
    <!-- KaTeX for Math -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
    
    <style>
        :root {
            /* Light Theme */
            --primary-color: #2980b9;
            --primary-hover: #1a5276;
            --link-color: #c0392b;
            --text-color: #333;
            --text-light: #666;
            --text-muted: #999;
            --bg-color: #fff;
            --bg-secondary: #f8f9fa;
            --bg-code: #f5f5f5;
            --border-color: #e5e7eb;
            --shadow: 0 1px 3px rgba(0,0,0,0.1);
            --shadow-lg: 0 4px 15px rgba(0,0,0,0.1);
        }

        [data-theme="dark"] {
            --primary-color: #5dade2;
            --primary-hover: #85c1e9;
            --link-color: #e74c3c;
            --text-color: #e5e7eb;
            --text-light: #9ca3af;
            --text-muted: #6b7280;
            --bg-color: #1a1a2e;
            --bg-secondary: #16213e;
            --bg-code: #0f0f23;
            --border-color: #374151;
            --shadow: 0 1px 3px rgba(0,0,0,0.3);
            --shadow-lg: 0 4px 15px rgba(0,0,0,0.4);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', 'Noto Sans SC', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            font-size: 16px;
            line-height: 1.8;
            color: var(--text-color);
            background: var(--bg-color);
            transition: background-color 0.3s, color 0.3s;
        }

        a {
            color: var(--primary-color);
            text-decoration: none;
            transition: color 0.2s;
        }

        a:hover {
            color: var(--primary-hover);
            text-decoration: underline;
        }

        /* Layout */
        .page-wrapper {
            display: flex;
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
            gap: 3rem;
        }

        /* Sidebar TOC */
        .toc-sidebar {
            width: 260px;
            flex-shrink: 0;
            position: sticky;
            top: 2rem;
            height: fit-content;
            max-height: calc(100vh - 4rem);
            overflow-y: auto;
        }

        .toc-container {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 1.5rem;
            border: 1px solid var(--border-color);
        }

        .toc-container h3 {
            font-size: 0.85rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-muted);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .toc-container ul {
            list-style: none;
        }

        .toc-container li {
            margin-bottom: 0.5rem;
        }

        .toc-container a {
            font-size: 0.9rem;
            color: var(--text-light);
            display: block;
            padding: 0.25rem 0;
            border-left: 2px solid transparent;
            padding-left: 0.75rem;
            transition: all 0.2s;
        }

        .toc-container a:hover,
        .toc-container a.active {
            color: var(--primary-color);
            border-left-color: var(--primary-color);
            text-decoration: none;
        }

        .toc-container ul ul {
            margin-left: 1rem;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            min-width: 0;
            max-width: 800px;
        }

        /* Header */
        .post-header {
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid var(--border-color);
        }

        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
            color: var(--text-light);
            margin-bottom: 1.5rem;
        }

        .back-link:hover {
            color: var(--primary-color);
            text-decoration: none;
        }

        .post-header h1 {
            font-size: 2.25rem;
            font-weight: 700;
            line-height: 1.3;
            margin-bottom: 1rem;
            color: var(--text-color);
        }

        .post-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 1.5rem;
            font-size: 0.9rem;
            color: var(--text-light);
        }

        .post-meta span {
            display: flex;
            align-items: center;
            gap: 0.4rem;
        }

        .post-meta i {
            color: var(--text-muted);
        }

        .tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .tag {
            display: inline-block;
            font-size: 0.8rem;
            background: var(--bg-secondary);
            color: var(--text-light);
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            border: 1px solid var(--border-color);
            transition: all 0.2s;
        }

        .tag:hover {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        /* Article Content */
        .post-content {
            font-size: 1rem;
            line-height: 1.9;
        }

        .post-content h1,
        .post-content h2,
        .post-content h3,
        .post-content h4,
        .post-content h5,
        .post-content h6 {
            margin-top: 2rem;
            margin-bottom: 1rem;
            font-weight: 600;
            line-height: 1.4;
            color: var(--text-color);
        }

        .post-content h1 { font-size: 1.875rem; }
        .post-content h2 { 
            font-size: 1.5rem; 
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--border-color);
        }
        .post-content h3 { font-size: 1.25rem; }
        .post-content h4 { font-size: 1.125rem; }

        .post-content p {
            margin-bottom: 1.25rem;
        }

        .post-content ul,
        .post-content ol {
            margin: 1.25rem 0;
            padding-left: 1.5rem;
        }

        .post-content li {
            margin-bottom: 0.5rem;
        }

        .post-content blockquote {
            margin: 1.5rem 0;
            padding: 1rem 1.5rem;
            background: var(--bg-secondary);
            border-left: 4px solid var(--primary-color);
            border-radius: 0 8px 8px 0;
            color: var(--text-light);
            font-style: italic;
        }

        .post-content blockquote p:last-child {
            margin-bottom: 0;
        }

        /* Code */
        .post-content code {
            font-family: 'JetBrains Mono', 'Fira Code', Consolas, monospace;
            font-size: 0.9em;
            background: var(--bg-code);
            padding: 0.2em 0.4em;
            border-radius: 4px;
            color: var(--link-color);
        }

        .post-content pre {
            margin: 1.5rem 0;
            padding: 1.25rem;
            background: var(--bg-code);
            border-radius: 10px;
            overflow-x: auto;
            border: 1px solid var(--border-color);
        }

        .post-content pre code {
            background: none;
            padding: 0;
            color: inherit;
            font-size: 0.875rem;
            line-height: 1.6;
        }

        /* Images */
        .post-content img {
            max-width: 100%;
            height: auto;
            border-radius: 10px;
            margin: 1.5rem 0;
            box-shadow: var(--shadow-lg);
        }

        /* Tables */
        .post-content table {
            width: 100%;
            margin: 1.5rem 0;
            border-collapse: collapse;
            font-size: 0.95rem;
        }

        .post-content th,
        .post-content td {
            padding: 0.75rem 1rem;
            border: 1px solid var(--border-color);
            text-align: left;
        }

        .post-content th {
            background: var(--bg-secondary);
            font-weight: 600;
        }

        .post-content tr:nth-child(even) {
            background: var(--bg-secondary);
        }

        /* Math */
        .math-display {
            margin: 1.5rem 0;
            overflow-x: auto;
            padding: 1rem;
            background: var(--bg-secondary);
            border-radius: 8px;
        }

        /* Anchor links */
        .anchor-link {
            opacity: 0;
            margin-left: 0.5rem;
            color: var(--text-muted);
            font-weight: 400;
            transition: opacity 0.2s;
        }

        .post-content h2:hover .anchor-link,
        .post-content h3:hover .anchor-link,
        .post-content h4:hover .anchor-link {
            opacity: 1;
        }

        /* Theme Toggle */
        .theme-toggle {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--primary-color);
            color: white;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
            box-shadow: var(--shadow-lg);
            transition: transform 0.2s, background 0.2s;
            z-index: 1000;
        }

        .theme-toggle:hover {
            transform: scale(1.1);
            background: var(--primary-hover);
        }

        /* Comments Section */
        .comments-section {
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 1px solid var(--border-color);
        }

        .comments-section h3 {
            font-size: 1.25rem;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Footer */
        .post-footer {
            margin-top: 3rem;
            padding-top: 1.5rem;
            border-top: 1px solid var(--border-color);
            text-align: center;
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .toc-sidebar {
                display: none;
            }
            
            .page-wrapper {
                padding: 1.5rem;
            }
        }

        @media (max-width: 768px) {
            .post-header h1 {
                font-size: 1.75rem;
            }
            
            .post-meta {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .theme-toggle {
                bottom: 1rem;
                right: 1rem;
                width: 44px;
                height: 44px;
            }
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-secondary);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--text-muted);
        }
    </style>
</head>
<body>
    <div class="page-wrapper">
        <!-- TOC Sidebar -->
        <aside class="toc-sidebar">
            <div class="toc-container">
                <h3><i class="fas fa-list"></i> 目录</h3>
                <div class="toc">
<ul>
<li><a href="#示例随机漫步">示例：随机漫步</a><ul>
<li><a href="#一次模拟多个随机漫步">一次模拟多个随机漫步</a></li>
</ul>
</li>
<li><a href="#补充">补充</a><ul>
<li><a href="#genfromtxt">genfromtxt</a></li>
</ul>
</li>
</ul>
</div>

            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <article>
                <header class="post-header">
                    <a href="../../../../index.html" class="back-link">
                        <i class="fas fa-arrow-left"></i> 返回博客列表
                    </a>
                    <h1>Untitled</h1>
                    <div class="post-meta">
                        <span><i class="fas fa-calendar-alt"></i> 2026-01-28</span>
                        <span><i class="fas fa-folder"></i> AINotes/00.Python/04.NumPy</span>
                        <span><i class="fas fa-user"></i> Hongwei Zhao</span>
                    </div>
                    <div class="tags">
                        
                    </div>
                </header>

                <div class="post-content">
                    <h2 id="示例随机漫步">示例：随机漫步<a class="anchor-link" href="#示例随机漫步" title="Permanent link">&para;</a></h2>
<p>我们通过模拟随机漫步来说明如何运用数组运算。先来看一个简单的随机漫步的例子：从 0 开始，步长 1 和 -1 出现的概率相等。</p>
<p>下面是一个通过内置的<code>random</code>模块以纯 Python 的方式实现 1000 步的随机漫步：</p>
<pre><code class="language-python">In [247]: import random
   .....: position = 0
   .....: walk = [position]
   .....: steps = 1000
   .....: for i in range(steps):
   .....:     step = 1 if random.randint(0, 1) else -1
   .....:     position += step
   .....:     walk.append(position)
   .....:
</code></pre>
<p>图 4-4 是根据前 100 个随机漫步值生成的折线图：</p>
<pre><code class="language-python">In [249]: plt.plot(walk[:100])
</code></pre>
<p><img src="https://markdownimg-hw.oss-cn-beijing.aliyuncs.com/image202208161006376.png" alt="图 4-4 简单的随机漫步" style="zoom:67%;" /></p>
<p>不难看出，这其实就是随机漫步中各步的累计和，可以用一个数组运算来实现。因此，我用<code>np.random</code>模块一次性随机产生 1000 个“掷硬币”结果（即两个数中任选一个），将其分别设置为 1 或 -1，然后计算累计和：</p>
<pre><code class="language-python">In [251]: nsteps = 1000

In [252]: draws = np.random.randint(0, 2, size=nsteps)

In [253]: steps = np.where(draws &gt; 0, 1, -1)

In [254]: walk = steps.cumsum()
</code></pre>
<p>有了这些数据之后，我们就可以沿着漫步路径做一些统计工作了，比如求取最大值和最小值：</p>
<pre><code class="language-python">In [255]: walk.min()
Out[255]: -3

In [256]: walk.max()
Out[256]: 31
</code></pre>
<p>现在来看一个复杂点的统计任务——首次穿越时间，即随机漫步过程中第一次到达某个特定值的时间。假设我们想要知道本次随机漫步需要多久才能距离初始 0 点至少 10 步远（任一方向均可）。<code>np.abs(walk)&gt;=10</code>可以得到一个布尔型数组，它表示的是距离是否达到或超过 10，而我们想要知道的是第一个 10 或 -10 的索引。可以用<code>argmax</code>来解决这个问题，它返回的是该布尔型数组第一个最大值的索引（<code>True</code>就是最大值）：</p>
<pre><code class="language-python">In [257]: (np.abs(walk) &gt;= 10).argmax()
Out[257]: 37
</code></pre>
<p>注意，这里使用<code>argmax</code>并不是很高效，因为它无论如何都会对数组进行完全扫描。在本例中，只要发现了一个<code>True</code>，那我们就知道它是个最大值了。</p>
<h3 id="一次模拟多个随机漫步">一次模拟多个随机漫步<a class="anchor-link" href="#一次模拟多个随机漫步" title="Permanent link">&para;</a></h3>
<p>如果你希望模拟多个随机漫步过程（比如 5000 个），只需对上面的代码做一点点修改即可生成所有的随机漫步过程。只要给<code>numpy.random</code>的函数传入一个二元元组就可以产生一个二维数组，然后我们就可以一次性计算 5000 个随机漫步过程（一行一个）的累计和了：</p>
<pre><code class="language-python">In [258]: nwalks = 5000

In [259]: nsteps = 1000

In [260]: draws = np.random.randint(0, 2, size=(nwalks, nsteps)) # 0 or 1

In [261]: steps = np.where(draws &gt; 0, 1, -1)

In [262]: walks = steps.cumsum(1)

In [263]: walks
Out[263]: 
array([[  1,   0,   1, ...,   8,   7,   8],
       [  1,   0,  -1, ...,  34,  33,  32],
       [  1,   0,  -1, ...,   4,   5,   4],
       ..., 
       [  1,   2,   1, ...,  24,  25,  26],
       [  1,   2,   3, ...,  14,  13,  14],
       [ -1,  -2,  -3, ..., -24, -23, -22]])
</code></pre>
<p>现在，我们来计算所有随机漫步过程的最大值和最小值：</p>
<pre><code class="language-python">In [264]: walks.max()
Out[264]: 138

In [265]: walks.min()
Out[265]: -133
</code></pre>
<p>得到这些数据之后，我们来计算 30 或 -30 的最小穿越时间。这里稍微复杂些，因为不是 5000 个过程都到达了 30。我们可以用<code>any</code>方法来对此进行检查：</p>
<pre><code class="language-python">In [266]: hits30 = (np.abs(walks) &gt;= 30).any(1)

In [267]: hits30
Out[267]: array([False,  True, False, ..., False,  True, False], dtype=bool)

In [268]: hits30.sum() # Number that hit 30 or -30
Out[268]: 3410
</code></pre>
<p>然后我们利用这个布尔型数组选出那些穿越了 30（绝对值）的随机漫步（行），并调用<code>argmax</code>在轴 1 上获取穿越时间：</p>
<pre><code class="language-python">In [269]: crossing_times = (np.abs(walks[hits30]) &gt;= 30).argmax(1)

In [270]: crossing_times.mean()
Out[270]: 498.88973607038122
</code></pre>
<p>请尝试用其他分布方式得到漫步数据。只需使用不同的随机数生成函数即可，如<code>normal</code>用于生成指定均值和标准差的正态分布数据：</p>
<pre><code class="language-python">In [271]: steps = np.random.normal(loc=0, scale=0.25,
   .....:                          size=(nwalks, nsteps))
</code></pre>
<h2 id="补充">补充<a class="anchor-link" href="#补充" title="Permanent link">&para;</a></h2>
<h3 id="genfromtxt">genfromtxt<a class="anchor-link" href="#genfromtxt" title="Permanent link">&para;</a></h3>
<p>Numpy 中导入数据方式有多种，其中函数之一为 genfromtxt ，genformtxt 相对其他函数有自己的优势和劣势，</p>
<ul>
<li>劣势：相对其它函数数据加载慢，从数据读入到返回需要两个迭代循环，第一个迭代将文件中每一行转化为一个字符串序列，第二个循环迭代对每个字符串序列指定合适的数据类型；源于这两个迭代原因，相对其它函数会慢一点；</li>
<li>优势：更灵活，数据加载时会能够处理丢失数据，例如对某些 missing_values 做一些数据填充，或将某一列数据从一中形式转化为另一种形式；</li>
</ul>
<p>函数语法如下：</p>
<p><strong>genfromtxt(fname，dtype，comments，delimiter，skipd_header，skip_fonter，converters，missing_values，filling_values，usecols，names, autostrip，</strong>kwarg)**</p>
<ul>
<li>fname -&gt; str/list /IO Object 等等，表示数据源；文件路径，字符串列表、StringIO 对象都可；</li>
<li>dtype -&gt; dtype，最终数组的数据类型；</li>
<li>comments -&gt; str，注释标识符，加载时会自动忽略位于注释标识符后面的字符串；</li>
<li>delimiter -&gt; str/int/sequence，分割符，加载时来分割字符串，比较常见的就是逗号，也可以指定 int 整形表示每一个元素最大宽度；也可以是字符列表，表示分割符可为多个字符；</li>
<li>skip_header -&gt; int，数据加载时跳过文件头部的字符行数；</li>
<li>skip_footer -&gt; int，数据加载时跳过文件尾部字符串行数；</li>
<li>converters -&gt; variable，可以是字典形式也可以是 lambda 函数，表示将某一种数据格式转化为另一种数据格式；</li>
<li>missing_values -&gt; variable，指定数组中 missing value；</li>
<li>filling_values -&gt; variable，指定 filling_values，来替代 missing_value；</li>
<li>usercols -&gt; sequence，指定需读取的列数， 0 表示第一列，-1 为最后一列；</li>
</ul>
<p>上面列举出各参数基本用法后，下面将针对里面每个参数，结合实例详细介绍其用法</p>
<p><strong>fname 参数</strong></p>
<p>入的 fname 是以 <strong>gz</strong> 结尾的话，读取时会在加载数据之前自动解压，但较为常见的都是 txt 文本</p>
<p><strong>delimiter参数</strong></p>
<p>当 delimiter 为字符时，表示分割符，元素以分割符进行分割</p>
<pre><code class="language-python">&gt;&gt;&gt; data = u&quot;1, 2, 3\n4, 5, 6&quot;
&gt;&gt;&gt; np.genfromtxt(StringIO(data), delimiter=&quot;,&quot;)
array([[ 1.,  2.,  3.],
       [ 4.,  5.,  6.]])
</code></pre>
<p>当 delimiter 表示整数元组时，代表每一列所在元素最大宽度；如下定义了每一列元素最大宽度分别为4，3，2；</p>
<pre><code class="language-python">&gt;&gt;&gt; data = u&quot;  1  2  3\n  4  5 67\n890123  4&quot;
&gt;&gt;&gt; np.genfromtxt(StringIO(data), delimiter=3)
array([[   1.,    2.,    3.],
       [   4.,    5.,   67.],
       [ 890.,  123.,    4.]])
&gt;&gt;&gt; data = u&quot;123456789\n   4  7 9\n   4567 9&quot;
&gt;&gt;&gt; np.genfromtxt(StringIO(data), delimiter=(4, 3, 2))
array([[ 1234.,   567.,    89.],
       [    4.,     7.,     9.],
       [    4.,   567.,     9.]])
</code></pre>
<p><strong>autostrip 参数</strong></p>
<p>对于每行字符串用 分割符分割后，得到的单个元素可能会含有一些制表符或空格等标识符；autostrip 参数设为 True，元素中的空格标识符会被自动删除~</p>
<pre><code class="language-python">&gt;&gt;&gt; data = u&quot;1, abc , 2\n 3, xxx, 4&quot;
&gt;&gt;&gt; # Without autostrip
&gt;&gt;&gt; np.genfromtxt(StringIO(data), delimiter=&quot;,&quot;, dtype=&quot;|U5&quot;)
array([['1', ' abc ', ' 2'],
       ['3', ' xxx', ' 4']], dtype='&lt;U5')
&gt;&gt;&gt; # With autostrip
&gt;&gt;&gt; np.genfromtxt(StringIO(data), delimiter=&quot;,&quot;, dtype=&quot;|U5&quot;, autostrip=True)
array([['1', 'abc', '2'],
       ['3', 'xxx', '4']], dtype='&lt;U5')
</code></pre>
<p><strong>comments 参数</strong></p>
<p>comments表示注释标识符，指定后注释标识符所在行后面的字符会被自动省略，如下：</p>
<pre><code class="language-python">&gt;&gt;&gt; data = u&quot;&quot;&quot;#
... # Skip me !
... # Skip me too !
... 1, 2
... 3, 4
... 5, 6 #This is the third line of the data
... 7, 8
... # And here comes the last line
... 9, 0
... &quot;&quot;&quot;
&gt;&gt;&gt; np.genfromtxt(StringIO(data), comments=&quot;#&quot;, delimiter=&quot;,&quot;)
array([[1., 2.],
       [3., 4.],
       [5., 6.],
       [7., 8.],
       [9., 0.]])
</code></pre>
<p><strong>skip_header，skip_footer</strong></p>
<p>读取数据时，可能前几行后者后几行的数据我们不需要，此时设定 skip_header、skip_footer 参数即可，例如读取时 想过滤数据列表中 前三行、后五行数据，此时参数设定时 <code>skip_header=3，skip_footer=5</code> 即可</p>
<pre><code class="language-python">&gt;&gt;&gt; data = u&quot;\n&quot;.join(str(i) for i in range(10))
&gt;&gt;&gt; np.genfromtxt(StringIO(data),)
array([ 0.,  1.,  2.,  3.,  4.,  5.,  6.,  7.,  8.,  9.])
&gt;&gt;&gt; np.genfromtxt(StringIO(data),
...               skip_header=3, skip_footer=5)
array([ 3.,  4.])
</code></pre>
<p><strong>usecols</strong></p>
<p>usecols 参数来指定只读取数据中指定的列，与数组索引用法相似，下面是只提取原数据中第一列和最后一列数据：</p>
<pre><code class="language-python">&gt;&gt;&gt; data = u&quot;1 2 3\n4 5 6&quot;
&gt;&gt;&gt; np.genfromtxt(StringIO(data), usecols=(0, -1))
array([[ 1.,  3.],
       [ 4.,  6.]])
</code></pre>
<p><strong>converters</strong></p>
<p>converters 用来对数组中一些数据进行格式替换，以字典形式定义 key 表示需要数据转化的列索引，value 为转换函数，下面实例中将百分比转化为浮点型</p>
<pre><code class="language-python">&gt;&gt;&gt; data = u&quot;1, , 3\n 4, 5, 6&quot;
&gt;&gt;&gt; convert = lambda x: float(x.strip() or -999)
&gt;&gt;&gt; np.genfromtxt(StringIO(data), delimiter=&quot;,&quot;,
...               converters={1: convert})
array([[   1., -999.,    3.],
       [   4.,    5.,    6.]])
</code></pre>
<p><strong>missing_values，filling_values</strong></p>
<p>读取的数据中一般出现缺失值，而这些缺失值有时对最终分析结果影响很大，我们需要做的就是将这些缺失值用某些值来代替，这里就需要用到 missing_values 、filling_values ，前者标记缺失值，后者对missing_values 进行填充 ，</p>
<p>例如下面的实例，分别将 0，1，2 列数据中的 'N/A'、空格、‘???’ 替换为 0，0，-999；</p>
<pre><code class="language-python">&gt;&gt;&gt; data = u&quot;N/A, 2, 3\n4, ,???&quot;
&gt;&gt;&gt; kwargs = dict(delimiter=&quot;,&quot;,
...               dtype=int,
...               names=&quot;a,b,c&quot;,
...               missing_values={0:&quot;N/A&quot;, 'b':&quot; &quot;, 2:&quot;???&quot;},
...               filling_values={0:0, 'b':0, 2:-999})
&gt;&gt;&gt; np.genfromtxt(StringIO(data), **kwargs)
array([(0, 2, 3), (4, 0, -999)],
      dtype=[('a', '&lt;i8'), ('b', '&lt;i8'), ('c', '&lt;i8')])
</code></pre>
                </div>

                <!-- Comments Section (Giscus) -->
                <section class="comments-section">
                    <h3><i class="fas fa-comments"></i> 评论</h3>
                    <script src="https://giscus.app/client.js"
                        data-repo="Geeks-Z/Geeks-Z.github.io"
                        data-repo-id=""
                        data-category="Announcements"
                        data-category-id=""
                        data-mapping="pathname"
                        data-strict="0"
                        data-reactions-enabled="1"
                        data-emit-metadata="0"
                        data-input-position="bottom"
                        data-theme="preferred_color_scheme"
                        data-lang="zh-CN"
                        crossorigin="anonymous"
                        async>
                    </script>
                </section>
            </article>

            <footer class="post-footer">
                <p>© 2025 Hongwei Zhao. Built with ❤️</p>
            </footer>
        </main>
    </div>

    <!-- Theme Toggle Button -->
    <button class="theme-toggle" id="themeToggle" aria-label="切换主题">
        <i class="fas fa-moon"></i>
    </button>

    <script>
        // Theme Toggle
        const themeToggle = document.getElementById('themeToggle');
        const html = document.documentElement;
        const icon = themeToggle.querySelector('i');
        const hljsDark = document.getElementById('hljs-theme-dark');
        const hljsLight = document.getElementById('hljs-theme-light');
        
        // Check saved theme or system preference
        const savedTheme = localStorage.getItem('theme');
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        
        if (savedTheme === 'dark' || (!savedTheme && prefersDark)) {
            html.setAttribute('data-theme', 'dark');
            icon.className = 'fas fa-sun';
            hljsDark.disabled = false;
            hljsLight.disabled = true;
        }
        
        themeToggle.addEventListener('click', () => {
            const isDark = html.getAttribute('data-theme') === 'dark';
            if (isDark) {
                html.removeAttribute('data-theme');
                icon.className = 'fas fa-moon';
                localStorage.setItem('theme', 'light');
                hljsDark.disabled = true;
                hljsLight.disabled = false;
            } else {
                html.setAttribute('data-theme', 'dark');
                icon.className = 'fas fa-sun';
                localStorage.setItem('theme', 'dark');
                hljsDark.disabled = false;
                hljsLight.disabled = true;
            }
            
            // Update Giscus theme
            const giscusFrame = document.querySelector('iframe.giscus-frame');
            if (giscusFrame) {
                giscusFrame.contentWindow.postMessage({
                    giscus: {
                        setConfig: {
                            theme: isDark ? 'light' : 'dark'
                        }
                    }
                }, 'https://giscus.app');
            }
        });
        
        // Highlight.js
        document.addEventListener('DOMContentLoaded', () => {
            hljs.highlightAll();
        });
        
        // KaTeX auto-render
        document.addEventListener('DOMContentLoaded', () => {
            if (typeof renderMathInElement !== 'undefined') {
                renderMathInElement(document.body, {
                    delimiters: [
                        {left: '$$', right: '$$', display: true},
                        {left: '$', right: '$', display: false},
                        {left: '\\[', right: '\\]', display: true},
                        {left: '\\(', right: '\\)', display: false}
                    ],
                    throwOnError: false
                });
            }
        });
        
        // TOC active state
        const tocLinks = document.querySelectorAll('.toc-container a');
        const headings = document.querySelectorAll('.post-content h2, .post-content h3, .post-content h4');
        
        function updateTocActive() {
            let current = '';
            headings.forEach(heading => {
                const rect = heading.getBoundingClientRect();
                if (rect.top <= 100) {
                    current = heading.getAttribute('id');
                }
            });
            
            tocLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === '#' + current) {
                    link.classList.add('active');
                }
            });
        }
        
        window.addEventListener('scroll', updateTocActive);
        updateTocActive();
    </script>
</body>
</html>
