<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>定义一个ArgumentParser实例</title>
    <meta name="description" content="定义一个ArgumentParser实例 - Hongwei Zhao's Blog">
    <meta name="author" content="Hongwei Zhao">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Noto+Sans+SC:wght@300;400;500;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Code Highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css" id="hljs-theme-dark">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css" id="hljs-theme-light" disabled>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    
    <!-- KaTeX for Math -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
    
    <style>
        :root {
            /* Light Theme */
            --primary-color: #2980b9;
            --primary-hover: #1a5276;
            --link-color: #c0392b;
            --text-color: #333;
            --text-light: #666;
            --text-muted: #999;
            --bg-color: #fff;
            --bg-secondary: #f8f9fa;
            --bg-code: #f5f5f5;
            --border-color: #e5e7eb;
            --shadow: 0 1px 3px rgba(0,0,0,0.1);
            --shadow-lg: 0 4px 15px rgba(0,0,0,0.1);
        }

        [data-theme="dark"] {
            --primary-color: #5dade2;
            --primary-hover: #85c1e9;
            --link-color: #e74c3c;
            --text-color: #e5e7eb;
            --text-light: #9ca3af;
            --text-muted: #6b7280;
            --bg-color: #1a1a2e;
            --bg-secondary: #16213e;
            --bg-code: #0f0f23;
            --border-color: #374151;
            --shadow: 0 1px 3px rgba(0,0,0,0.3);
            --shadow-lg: 0 4px 15px rgba(0,0,0,0.4);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', 'Noto Sans SC', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            font-size: 16px;
            line-height: 1.8;
            color: var(--text-color);
            background: var(--bg-color);
            transition: background-color 0.3s, color 0.3s;
        }

        a {
            color: var(--primary-color);
            text-decoration: none;
            transition: color 0.2s;
        }

        a:hover {
            color: var(--primary-hover);
            text-decoration: underline;
        }

        /* Layout */
        .page-wrapper {
            display: flex;
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
            gap: 3rem;
        }

        /* Sidebar TOC */
        .toc-sidebar {
            width: 260px;
            flex-shrink: 0;
            position: sticky;
            top: 2rem;
            height: fit-content;
            max-height: calc(100vh - 4rem);
            overflow-y: auto;
        }

        .toc-container {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 1.5rem;
            border: 1px solid var(--border-color);
        }

        .toc-container h3 {
            font-size: 0.85rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-muted);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .toc-container ul {
            list-style: none;
        }

        .toc-container li {
            margin-bottom: 0.5rem;
        }

        .toc-container a {
            font-size: 0.9rem;
            color: var(--text-light);
            display: block;
            padding: 0.25rem 0;
            border-left: 2px solid transparent;
            padding-left: 0.75rem;
            transition: all 0.2s;
        }

        .toc-container a:hover,
        .toc-container a.active {
            color: var(--primary-color);
            border-left-color: var(--primary-color);
            text-decoration: none;
        }

        .toc-container ul ul {
            margin-left: 1rem;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            min-width: 0;
            max-width: 800px;
        }

        /* Header */
        .post-header {
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid var(--border-color);
        }

        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
            color: var(--text-light);
            margin-bottom: 1.5rem;
        }

        .back-link:hover {
            color: var(--primary-color);
            text-decoration: none;
        }

        .post-header h1 {
            font-size: 2.25rem;
            font-weight: 700;
            line-height: 1.3;
            margin-bottom: 1rem;
            color: var(--text-color);
        }

        .post-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 1.5rem;
            font-size: 0.9rem;
            color: var(--text-light);
        }

        .post-meta span {
            display: flex;
            align-items: center;
            gap: 0.4rem;
        }

        .post-meta i {
            color: var(--text-muted);
        }

        .tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .tag {
            display: inline-block;
            font-size: 0.8rem;
            background: var(--bg-secondary);
            color: var(--text-light);
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            border: 1px solid var(--border-color);
            transition: all 0.2s;
        }

        .tag:hover {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        /* Article Content */
        .post-content {
            font-size: 1rem;
            line-height: 1.9;
        }

        .post-content h1,
        .post-content h2,
        .post-content h3,
        .post-content h4,
        .post-content h5,
        .post-content h6 {
            margin-top: 2rem;
            margin-bottom: 1rem;
            font-weight: 600;
            line-height: 1.4;
            color: var(--text-color);
        }

        .post-content h1 { font-size: 1.875rem; }
        .post-content h2 { 
            font-size: 1.5rem; 
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--border-color);
        }
        .post-content h3 { font-size: 1.25rem; }
        .post-content h4 { font-size: 1.125rem; }

        .post-content p {
            margin-bottom: 1.25rem;
        }

        .post-content ul,
        .post-content ol {
            margin: 1.25rem 0;
            padding-left: 1.5rem;
        }

        .post-content li {
            margin-bottom: 0.5rem;
        }

        .post-content blockquote {
            margin: 1.5rem 0;
            padding: 1rem 1.5rem;
            background: var(--bg-secondary);
            border-left: 4px solid var(--primary-color);
            border-radius: 0 8px 8px 0;
            color: var(--text-light);
            font-style: italic;
        }

        .post-content blockquote p:last-child {
            margin-bottom: 0;
        }

        /* Code */
        .post-content code {
            font-family: 'JetBrains Mono', 'Fira Code', Consolas, monospace;
            font-size: 0.9em;
            background: var(--bg-code);
            padding: 0.2em 0.4em;
            border-radius: 4px;
            color: var(--link-color);
        }

        .post-content pre {
            margin: 1.5rem 0;
            padding: 1.25rem;
            background: var(--bg-code);
            border-radius: 10px;
            overflow-x: auto;
            border: 1px solid var(--border-color);
        }

        .post-content pre code {
            background: none;
            padding: 0;
            color: inherit;
            font-size: 0.875rem;
            line-height: 1.6;
        }

        /* Images */
        .post-content img {
            max-width: 100%;
            height: auto;
            border-radius: 10px;
            margin: 1.5rem 0;
            box-shadow: var(--shadow-lg);
        }

        /* Tables */
        .post-content table {
            width: 100%;
            margin: 1.5rem 0;
            border-collapse: collapse;
            font-size: 0.95rem;
        }

        .post-content th,
        .post-content td {
            padding: 0.75rem 1rem;
            border: 1px solid var(--border-color);
            text-align: left;
        }

        .post-content th {
            background: var(--bg-secondary);
            font-weight: 600;
        }

        .post-content tr:nth-child(even) {
            background: var(--bg-secondary);
        }

        /* Math */
        .math-display {
            margin: 1.5rem 0;
            overflow-x: auto;
            padding: 1rem;
            background: var(--bg-secondary);
            border-radius: 8px;
        }

        /* Anchor links */
        .anchor-link {
            opacity: 0;
            margin-left: 0.5rem;
            color: var(--text-muted);
            font-weight: 400;
            transition: opacity 0.2s;
        }

        .post-content h2:hover .anchor-link,
        .post-content h3:hover .anchor-link,
        .post-content h4:hover .anchor-link {
            opacity: 1;
        }

        /* Theme Toggle */
        .theme-toggle {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--primary-color);
            color: white;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
            box-shadow: var(--shadow-lg);
            transition: transform 0.2s, background 0.2s;
            z-index: 1000;
        }

        .theme-toggle:hover {
            transform: scale(1.1);
            background: var(--primary-hover);
        }

        /* Comments Section */
        .comments-section {
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 1px solid var(--border-color);
        }

        .comments-section h3 {
            font-size: 1.25rem;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Footer */
        .post-footer {
            margin-top: 3rem;
            padding-top: 1.5rem;
            border-top: 1px solid var(--border-color);
            text-align: center;
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .toc-sidebar {
                display: none;
            }
            
            .page-wrapper {
                padding: 1.5rem;
            }
        }

        @media (max-width: 768px) {
            .post-header h1 {
                font-size: 1.75rem;
            }
            
            .post-meta {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .theme-toggle {
                bottom: 1rem;
                right: 1rem;
                width: 44px;
                height: 44px;
            }
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-secondary);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--text-muted);
        }
    </style>
</head>
<body>
    <div class="page-wrapper">
        <!-- TOC Sidebar -->
        <aside class="toc-sidebar">
            <div class="toc-container">
                <h3><i class="fas fa-list"></i> 目录</h3>
                <div class="toc">
<ul>
<li><a href="#argparse">argparse</a><ul>
<li><a href="#参数说明">参数说明</a></li>
<li><a href="#示例">示例</a></li>
</ul>
</li>
<li><a href="#parseradd_argument">parser.add_argument</a></li>
<li><a href="#map">map()</a><ul>
<li><a href="#1-map-函数的语法">1. map() 函数的语法</a></li>
<li><a href="#2-map-的返回值">2. map() 的返回值</a></li>
<li><a href="#3-示例">3. 示例</a><ul>
<li><a href="#31-使用-map-处理单个可迭代对象">3.1 使用 map() 处理单个可迭代对象</a></li>
<li><a href="#32-使用自定义函数">3.2 使用自定义函数</a></li>
<li><a href="#33-处理多个可迭代对象">3.3 处理多个可迭代对象</a></li>
<li><a href="#34-处理字符串">3.4 处理字符串</a></li>
</ul>
</li>
<li><a href="#4-使用-map-与多个函数结合">4. 使用 map() 与多个函数结合</a></li>
<li><a href="#5-map-与列表推导式的对比">5. map() 与列表推导式的对比</a></li>
<li><a href="#6-总结">6. 总结</a></li>
</ul>
</li>
<li><a href="#lambda-函数">lambda 函数</a><ul>
<li><a href="#lambda-表达式使用场景">lambda 表达式使用场景</a></li>
<li><a href="#作为-map-函数中的函数参数">作为 map() 函数中的函数参数</a></li>
</ul>
</li>
<li><a href="#filter">filter</a><ul>
<li><a href="#语法">语法</a></li>
<li><a href="#返回值">返回值</a></li>
<li><a href="#示例_1">示例</a></li>
<li><a href="#注意事项">注意事项</a></li>
</ul>
</li>
<li><a href="#next和-iter函数详解">next()和 iter()函数详解</a><ul>
<li><a href="#容器container">容器（container）</a></li>
<li><a href="#迭代器">迭代器</a></li>
<li><a href="#生成器">生成器</a></li>
<li><a href="#总结">总结</a></li>
</ul>
</li>
<li><a href="#enumerate">enumerate()</a></li>
<li><a href="#logging-模块">logging 模块</a><ul>
<li><a href="#基本概念">基本概念</a></li>
<li><a href="#常用功能">常用功能</a></li>
<li><a href="#示例_2">示例</a></li>
<li><a href="#高级配置">高级配置</a></li>
</ul>
</li>
</ul>
</div>

            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <article>
                <header class="post-header">
                    <a href="../../../../index.html" class="back-link">
                        <i class="fas fa-arrow-left"></i> 返回博客列表
                    </a>
                    <h1>定义一个ArgumentParser实例</h1>
                    <div class="post-meta">
                        <span><i class="fas fa-calendar-alt"></i> 2026-01-28</span>
                        <span><i class="fas fa-folder"></i> AINotes/00.Python/02.数据结构 函数 和文件</span>
                        <span><i class="fas fa-user"></i> Hongwei Zhao</span>
                    </div>
                    <div class="tags">
                        
                    </div>
                </header>

                <div class="post-content">
                    <h2 id="argparse">argparse<a class="anchor-link" href="#argparse" title="Permanent link">&para;</a></h2>
<p><code>argparse</code> 是 Python 的一个标准库，用于编写用户友好的命令行接口。它允许开发者定义命令行参数，并解析这些参数以供程序使用。下面是对 <code>argparse</code> 中常用参数的一些说明：</p>
<h3 id="参数说明">参数说明<a class="anchor-link" href="#参数说明" title="Permanent link">&para;</a></h3>
<ul>
<li>name or flags</li>
</ul>
<p>这是参数的名称或标志。对于可选参数，通常使用 <code>--</code> 或 <code>-</code> 前缀。例如，<code>--verbose</code> 或 <code>-v</code>。约定俗称的写法是 <code>--</code> 后面跟完整参数名，<code>-</code> 后面是简写。</p>
<ul>
<li>action</li>
</ul>
<p>定义参数被解析时执行的操作。常见的操作包括 <code>store</code>（存储值）、<code>store_const</code>（存储常量值）、<code>append</code>（将值添加到列表中）等。</p>
<ul>
<li>default</li>
</ul>
<p>当参数未在命令行中提供时使用的默认值。</p>
<ul>
<li>required</li>
</ul>
<p>一个布尔值，表示这个参数是否一定需要设置。如果设置为 <code>True</code>，那么用户必须在命令行中提供这个参数。</p>
<ul>
<li>type</li>
</ul>
<p>参数的类型。默认是字符串类型，但也可以指定为其他类型，如 <code>int</code>、<code>float</code> 或自定义类型。</p>
<ul>
<li>choices</li>
</ul>
<p>参数值只能从几个选项中选择。这可以确保用户只能提供有效的参数值。</p>
<ul>
<li>help</li>
</ul>
<p>指定参数的说明信息。当用户在命令行中使用 <code>-h</code> 或 <code>--help</code> 参数时，这些说明信息会被打印出来，帮助用户理解如何使用参数。</p>
<ul>
<li>nargs</li>
</ul>
<p>指定命令行参数应该读取的个数。可以是具体的数字，也可以是 <code>?</code>（表示参数是可选的）或 <code>*</code>（表示可以接收任意个参数）。</p>
<ul>
<li>const</li>
</ul>
<p>与 <code>action</code> 和 <code>store_const</code> 一起使用，表示当参数被触发时存储的常量值。</p>
<ul>
<li>metavar</li>
</ul>
<p>在帮助信息中显示的参数名。有时，参数的实际名称可能不适合在帮助信息中显示，这时可以使用 <code>metavar</code> 来提供一个更友好的名称。</p>
<h3 id="示例">示例<a class="anchor-link" href="#示例" title="Permanent link">&para;</a></h3>
<p>以下是一个简单的示例，展示了如何使用这些参数：</p>
<pre><code class="language-python">import argparse

# 定义一个ArgumentParser实例
parser = argparse.ArgumentParser(description='一个简单的示例')
#jupyter notebook系统默认会给一个奇怪的参数-f，用-f来接收这个参数避免报错
parser.add_argument(&quot;-f&quot;,&quot;--file&quot;,default=&quot;file&quot;)
parser.add_argument('--input', type=str, required=True, help='输入文件的路径')
parser.add_argument('--output', type=str, default='output.txt', help='输出文件的路径（默认为 output.txt）')
parser.add_argument('--verbose', action='store_true', help='是否打印详细日志')
# 解析参数:
args = parser.parse_args()
</code></pre>
<p>在这个示例中：</p>
<ul>
<li><code>--input</code> 是一个必需的参数，类型为字符串。</li>
<li><code>--output</code> 有一个默认值 <code>'output.txt'</code>，如果用户在命令行中没有提供该参数，将使用这个默认值。</li>
<li><code>--verbose</code> 是一个布尔类型的参数，当它被提供时，<code>action='store_true'</code> 会将 <code>args.verbose</code> 设置为 <code>True</code>。</li>
</ul>
<p>用户可以通过以下方式运行这个脚本：</p>
<pre><code class="language-bash">python script.py --input data.txt --output result.txt --verbose
</code></pre>
<p>在这个例子中，<code>args.input</code> 的值将是 <code>'data.txt'</code>，<code>args.output</code> 的值将是 <code>'result.txt'</code>，而 <code>args.verbose</code> 将被设置为 <code>True</code>。</p>
<h2 id="parseradd_argument">parser.add_argument<a class="anchor-link" href="#parseradd_argument" title="Permanent link">&para;</a></h2>
<p><code>ArgumentParser.add_argument(name or flags...[, action][, nargs][, const][, default][, type][, choices][, required][, help][, metavar][, dest])</code></p>
<p>每个参数解释如下:</p>
<ul>
<li>name or flags - 选项字符串的名字或者列表，例如 foo 或者 -f, --foo。</li>
<li>action - 命令行遇到参数时的动作，默认值是 store。</li>
<li>store_const，表示赋值为 const；</li>
<li>append，将遇到的值存储成列表，也就是如果参数重复则会保存多个值;</li>
<li>append_const，将参数规范中定义的一个值保存到一个列表；</li>
<li>count，存储遇到的次数；此外，也可以继承 argparse.Action 自定义参数解析；</li>
<li>nargs - 应该读取的命令行参数个数，可以是具体的数字，或者是?号，当不指定值时对于 Positional argument 使用 default，对于 Optional argument 使用 const；或者是 * 号，表示 0 或多个参数；或者是 + 号表示 1 或多个参数。</li>
<li>const - action 和 nargs 所需要的常量值。</li>
<li>default - 不指定参数时的默认值。</li>
<li>type - 命令行参数应该被转换成的类型。</li>
<li>choices - 参数可允许的值的一个容器。</li>
<li>required - 可选参数是否可以省略 (仅针对可选参数)。</li>
<li>help - 参数的帮助信息，当指定为 argparse.SUPPRESS 时表示不显示该参数的帮助信息.</li>
<li>metavar - 在 usage 说明中的参数名称，对于必选参数默认就是参数名称，对于可选参数默认是全大写的参数名称.</li>
<li>dest - 解析后的参数名称，默认情况下，对于可选参数选取最长的名称，中划线转换为下划线.</li>
</ul>
<h2 id="map">map()<a class="anchor-link" href="#map" title="Permanent link">&para;</a></h2>
<p><code>map()</code> 函数是 Python 中的一个内置函数，常用于将某个函数应用到一个或多个可迭代对象（如列表、元组等）的每个元素上。<code>map()</code> 函数返回一个迭代器，其中包含函数应用后的结果。</p>
<h3 id="1-map-函数的语法">1. <code>map()</code> 函数的语法<a class="anchor-link" href="#1-map-函数的语法" title="Permanent link">&para;</a></h3>
<pre><code class="language-python">map(function, iterable, ...)
</code></pre>
<ul>
<li><strong><code>function</code></strong>：要应用的函数。可以是一个内置函数、用户自定义函数或 <code>lambda</code> 表达式。</li>
<li><strong><code>iterable</code></strong>：一个或多个可迭代对象，如列表、元组、字符串等。<code>map()</code> 函数会逐一将每个可迭代对象的元素传递给函数。</li>
</ul>
<h3 id="2-map-的返回值">2. <code>map()</code> 的返回值<a class="anchor-link" href="#2-map-的返回值" title="Permanent link">&para;</a></h3>
<p><code>map()</code> 返回一个迭代器（<class 'map'> 对象），如果你想查看 <code>map()</code> 的结果，可以将它转换为列表、元组等类型：</p>
<pre><code class="language-python">result = list(map(function, iterable))
</code></pre>
<h3 id="3-示例">3. 示例<a class="anchor-link" href="#3-示例" title="Permanent link">&para;</a></h3>
<h4 id="31-使用-map-处理单个可迭代对象">3.1 使用 <code>map()</code> 处理单个可迭代对象<a class="anchor-link" href="#31-使用-map-处理单个可迭代对象" title="Permanent link">&para;</a></h4>
<p>假设我们有一个列表，我们想对列表中的每个元素应用平方运算。</p>
<pre><code class="language-python">numbers = [1, 2, 3, 4, 5]

# 使用 map 应用平方运算
squared_numbers = map(lambda x: x ** 2, numbers)

# 转换为列表查看结果
print(list(squared_numbers))  # 输出：[1, 4, 9, 16, 25]
</code></pre>
<h4 id="32-使用自定义函数">3.2 使用自定义函数<a class="anchor-link" href="#32-使用自定义函数" title="Permanent link">&para;</a></h4>
<p>我们可以用自定义函数代替 <code>lambda</code> 表达式。</p>
<pre><code class="language-python"># 定义一个函数来计算平方
def square(x):
    return x ** 2

numbers = [1, 2, 3, 4, 5]
squared_numbers = map(square, numbers)

print(list(squared_numbers))  # 输出：[1, 4, 9, 16, 25]
</code></pre>
<h4 id="33-处理多个可迭代对象">3.3 处理多个可迭代对象<a class="anchor-link" href="#33-处理多个可迭代对象" title="Permanent link">&para;</a></h4>
<p><code>map()</code> 可以同时接受多个可迭代对象，将每个对象对应位置上的元素传递给函数。例如，我们想对两个列表的每个元素进行相加：</p>
<pre><code class="language-python">numbers1 = [1, 2, 3]
numbers2 = [4, 5, 6]

# 使用 map 对两个列表中的元素逐一相加
summed_numbers = map(lambda x, y: x + y, numbers1, numbers2)

print(list(summed_numbers))  # 输出：[5, 7, 9]
</code></pre>
<p>当 <code>map()</code> 处理多个可迭代对象时，它会根据最短的可迭代对象长度进行截断，这意味着如果一个列表的长度比另一个列表短，那么 <code>map()</code> 会忽略多出来的元素。</p>
<h4 id="34-处理字符串">3.4 处理字符串<a class="anchor-link" href="#34-处理字符串" title="Permanent link">&para;</a></h4>
<p><code>map()</code> 也可以用于字符串的处理，例如我们想将字符串中的每个字符转换为大写：</p>
<pre><code class="language-python">letters = ['a', 'b', 'c']

# 使用 map 将字符转换为大写
uppercase_letters = map(str.upper, letters)

print(list(uppercase_letters))  # 输出：['A', 'B', 'C']
</code></pre>
<h3 id="4-使用-map-与多个函数结合">4. 使用 <code>map()</code> 与多个函数结合<a class="anchor-link" href="#4-使用-map-与多个函数结合" title="Permanent link">&para;</a></h3>
<p><code>map()</code> 通常会与其他函数（如 <code>lambda</code>、<code>filter</code>、<code>reduce</code>）结合使用，帮助你构建简洁的函数式编程逻辑。</p>
<p>例如，我们可以先用 <code>map()</code> 来对列表中的元素进行平方，再用 <code>filter()</code> 来筛选出偶数：</p>
<pre><code class="language-python">numbers = [1, 2, 3, 4, 5, 6]

# 先用 map 进行平方运算
squared_numbers = map(lambda x: x ** 2, numbers)

# 再用 filter 筛选出偶数
even_squared_numbers = filter(lambda x: x % 2 == 0, squared_numbers)

print(list(even_squared_numbers))  # 输出：[4, 16, 36]
</code></pre>
<h3 id="5-map-与列表推导式的对比">5. <code>map()</code> 与列表推导式的对比<a class="anchor-link" href="#5-map-与列表推导式的对比" title="Permanent link">&para;</a></h3>
<p><code>map()</code> 常常与 Python 的列表推导式相比较。两者的功能非常相似，但在某些情况下，使用列表推导式可能会更简洁，尤其是当操作比较简单时。</p>
<p>例如，使用列表推导式来计算平方：</p>
<pre><code class="language-python">numbers = [1, 2, 3, 4, 5]

# 使用列表推导式
squared_numbers = [x ** 2 for x in numbers]

print(squared_numbers)  # 输出：[1, 4, 9, 16, 25]
</code></pre>
<p>在这个例子中，列表推导式比 <code>map()</code> 更加直观。</p>
<h3 id="6-总结">6. 总结<a class="anchor-link" href="#6-总结" title="Permanent link">&para;</a></h3>
<ul>
<li><code>map()</code> 是一个非常有用的函数式编程工具，用于将一个函数应用到一个或多个可迭代对象的每个元素上。</li>
<li>它返回一个惰性计算的迭代器，适合处理大数据集时的高效内存管理。</li>
<li>在某些简单场景下，列表推导式可能更具可读性，但 <code>map()</code> 在处理多个可迭代对象或结合其他函数时显得更加灵活。</li>
<li><strong>惰性计算</strong>：<code>map()</code> 返回的是一个迭代器，这意味着它不会立即计算所有结果，而是在需要时逐个生成。与生成完整的列表相比，<code>map()</code> 在处理大数据集时可以节省内存。</li>
<li><strong>返回值是迭代器</strong>：<code>map()</code> 返回的是迭代器，而不是列表。因此，在某些情况下需要将其转换为列表或元组来查看结果。</li>
</ul>
<h2 id="lambda-函数">lambda 函数<a class="anchor-link" href="#lambda-函数" title="Permanent link">&para;</a></h2>
<blockquote>
<p><a href="https://blog.csdn.net/PY0312/article/details/88956795">Python 之 lambda 函数完整详解 &amp; 巧妙运用</a></p>
</blockquote>
<p>lambda 函数是 Python 中一个非常重要的语法，它允许我们创建匿名函数。它是一个函数，但没有函数名，没有 def 语句，只有参数列表和一个返回值。lambda 函数的语法格式如下：</p>
<p>lambda 参数列表: 返回值</p>
<p>例如，一个加法函数的 lambda 表达式如下：</p>
<p>lambda a, b: a + b</p>
<p>以下是一些使用 lambda 表达式创建的函数：</p>
<pre><code class="language-python"># 定义一个加法函数
def add(a, b):
    return a + b

# 定义一个 lambda 表达式
add_lambda = lambda a, b: a + b

# 调用函数
print(add(1, 2))
print(add_lambda(1, 2))
</code></pre>
<p>输出结果：</p>
<pre><code>3
3
</code></pre>
<p>在上面的代码中，<code>add</code> 是一个定义好的函数，<code>add_lambda</code> 是使用 lambda 表达式创建的函数。它们的使用方式是相同的，只是 <code>add</code> 是一个定义好的函数，<code>add_lambda</code> 是使用 lambda 表达式创建的函数。</p>
<h3 id="lambda-表达式使用场景">lambda 表达式使用场景<a class="anchor-link" href="#lambda-表达式使用场景" title="Permanent link">&para;</a></h3>
<ul>
<li>作为函数参数传递</li>
<li>作为装饰器</li>
<li>作为生成器表达式中的生成器函数</li>
<li>作为 sorted() 函数中的 key 参数</li>
<li>作为 filter() 函数中的函数参数</li>
</ul>
<h3 id="作为-map-函数中的函数参数">作为 map() 函数中的函数参数<a class="anchor-link" href="#作为-map-函数中的函数参数" title="Permanent link">&para;</a></h3>
<pre><code class="language-python"># ===========一般写法：===========
# 1、计算平方数
def square(x):
    return x ** 2

map(square, [1,2,3,4,5])# 计算列表各个元素的平方
# 结果：
[1, 4, 9, 16, 25]

# ===========匿名函数写法：============
# 2、计算平方数，lambda 写法
map(lambda x: x ** 2, [1, 2, 3, 4, 5])
# 结果：
[1, 4, 9, 16, 25]

# 3、提供两个列表，将其相同索引位置的列表元素进行相加
map(lambda x, y: x + y, [1, 3, 5, 7, 9], [2, 4, 6, 8, 10])
# 结果：
[3, 7, 11, 15, 19]
</code></pre>
<h2 id="filter">filter<a class="anchor-link" href="#filter" title="Permanent link">&para;</a></h2>
<p><code>filter</code> 是 Python 中的一个内置函数，它用于过滤序列，过滤掉不符合条件的元素，返回一个迭代器对象。<code>filter</code> 函数通常用于处理数据筛选，它接收两个参数：一个函数和一个序列。这个函数用于判断序列中的每个元素是否符合条件，返回布尔值（True 或 False）。序列可以是列表、元组、字典等任何可迭代对象。</p>
<h3 id="语法">语法<a class="anchor-link" href="#语法" title="Permanent link">&para;</a></h3>
<pre><code class="language-python">filter(function, iterable)
</code></pre>
<ul>
<li><code>function</code>：一个函数，用于判断每个元素是否保留。</li>
<li><code>iterable</code>：一个序列，如列表、元组等。</li>
</ul>
<h3 id="返回值">返回值<a class="anchor-link" href="#返回值" title="Permanent link">&para;</a></h3>
<p>返回一个迭代器，可以通过 <code>list()</code> 转换为列表。</p>
<h3 id="示例_1">示例<a class="anchor-link" href="#示例_1" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>基本使用</strong></li>
</ol>
<pre><code class="language-python"># 定义一个过滤函数
def is_even(num):
    return num % 2 == 0

# 使用 filter 函数过滤偶数
numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
even_numbers = filter(is_even, numbers)

# 将结果转换为列表
print(list(even_numbers))  # 输出: [2, 4, 6, 8, 10]
</code></pre>
<ol start="2">
<li><strong>使用 lambda 表达式</strong></li>
</ol>
<pre><code class="language-python"># 使用 lambda 表达式过滤偶数
numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
even_numbers = filter(lambda x: x % 2 == 0, numbers)

# 将结果转换为列表
print(list(even_numbers))  # 输出: [2, 4, 6, 8, 10]
</code></pre>
<ol start="3">
<li><strong>过滤字符串</strong></li>
</ol>
<pre><code class="language-python"># 过滤出包含字母 'a' 的字符串
words = ['apple', 'banana', 'cherry', 'date']
filtered_words = filter(lambda word: 'a' in word, words)

# 将结果转换为列表
print(list(filtered_words))  # 输出: ['apple', 'banana', 'cherry', 'date']
</code></pre>
<ol start="4">
<li><strong>过滤字典</strong></li>
</ol>
<pre><code class="language-python"># 过滤出值大于 10 的字典项
data = {'a': 5, 'b': 12, 'c': 7, 'd': 18}
filtered_data = filter(lambda item: item[1] &gt; 10, data.items())

# 将结果转换为字典
print(dict(filtered_data))  # 输出: {'b': 12, 'd': 18}
</code></pre>
<h3 id="注意事项">注意事项<a class="anchor-link" href="#注意事项" title="Permanent link">&para;</a></h3>
<ul>
<li><code>filter</code> 返回的是一个迭代器，不是列表。如果需要列表形式，可以使用 <code>list()</code> 函数转换。</li>
<li><code>filter</code> 函数本身不会修改原始数据，它只是创建一个新的迭代器。</li>
<li>过滤函数必须返回布尔值，True 表示保留该元素，False 表示不保留。</li>
<li><strong>惰性计算</strong>：<code>filter()</code> 返回一个迭代器对象，它是惰性求值的，意思是它不会立即计算所有结果，而是每次迭代时才进行计算。这意味着它比直接生成一个完整的列表更高效，特别是当数据量很大时。</li>
<li><strong>函数为 <code>None</code> 的行为</strong>：当 <code>filter()</code> 的第一个参数 <code>function</code> 被设置为 <code>None</code> 时，它会将 <code>iterable</code> 中所有 "truthy" 的值保留下来，也就是会自动过滤掉等价于 <code>False</code> 的元素，比如 <code>None</code>、<code>0</code>、空字符串等。</li>
</ul>
<h2 id="next和-iter函数详解">next()和 iter()函数详解<a class="anchor-link" href="#next和-iter函数详解" title="Permanent link">&para;</a></h2>
<blockquote>
<p><a href="https://zhuanlan.zhihu.com/p/356054426">迭代相关<strong>：iter</strong>函数和<strong>next</strong>函数</a></p>
</blockquote>
<p>迭代器就是重复地做一些事情，可以简单的理解为循环，在 python 中实现了<code>__iter__</code>方法的对象是可迭代的，实现了<code>next()</code>方法的对象是迭代器，这样说起来有点拗口，实际上要想让一个迭代器工作，至少要实现<code>__iter__</code>方法和<code>next</code>方法。很多时候使用迭代器完成的工作使用列表也可以完成，但是如果有很多值列表就会占用太多的内存，而且使用迭代器也让我们的程序更加通用、优雅、pythonic。</p>
<p>如果一个类想被用于<code>for ... in</code>循环，类似 list 或 tuple 那样，就必须实现一个<code>__iter__()</code>方法，该方法返回一个迭代对象，然后，Python 的 for 循环就会不断调用该迭代对象的<code>next()</code>方法拿到循环的下一个值，直到遇到 StopIteration 错误时退出循环。</p>
<h3 id="容器container">容器（container）<a class="anchor-link" href="#容器container" title="Permanent link">&para;</a></h3>
<p>容器是用来储存元素的一种数据结构，容器将所有数据保存在内存中，Python 中典型的容器有：list，set，dict，str 等等。</p>
<pre><code class="language-python">class test():
    def __init__(self,data=1):
        self.data = data

    def __iter__(self):
        return self
    def __next__(self):
        if self.data &gt; 5:
            raise StopIteration
        else:
            self.data+=1
            return self.data

for item in test(3):
    print(item)
</code></pre>
<p>输出结果：</p>
<pre><code class="language-python">4
5
6
</code></pre>
<p><code>for … in…</code>这个语句其实做了两件事。第一件事是获得一个可迭代器，即调用了<code>__iter__()</code>函数。 第二件事是循环的过程，循环调用<code>__next__()</code>函数。</p>
<p>对于 test 这个类来说，它定义了<code>__iter__</code>和<code>__next__</code>函数，所以是一个可迭代的类，也可以说是一个可迭代的对象（Python 中一切皆对象）。</p>
<h3 id="迭代器">迭代器<a class="anchor-link" href="#迭代器" title="Permanent link">&para;</a></h3>
<p>含有<code>__next__()</code>函数的对象都是一个迭代器，所以 test 也可以说是一个迭代器。如果去掉<code>__itet__()</code>函数，test 这个类也不会报错。如下代码所示：</p>
<pre><code class="language-python">class test():
    def __init__(self,data=1):
        self.data = data

    def __next__(self):
        if self.data &gt; 5:
            raise StopIteration
        else:
            self.data+=1
            return self.data

t = test(3)
for i in range(3):
    print(t.__next__())
</code></pre>
<p>输出结果：</p>
<pre><code class="language-python">4
5
6
</code></pre>
<h3 id="生成器">生成器<a class="anchor-link" href="#生成器" title="Permanent link">&para;</a></h3>
<p>生成器是一种特殊的迭代器。当调用 fib()函数时，生成器实例化并返回，这时并不会执行任何代码，生成器处于空闲状态，注意这里 prev, curr = 0, 1 并未执行。然后这个生成器被包含在 list()中，list 会根据传进来的参数生成一个列表，所以它对 fib()对象(一切皆对象，函数也是对象)调用<strong>next</strong>方法。</p>
<pre><code class="language-python">def fib(end = 1000):
    prev,curr=0,1
    while curr &lt; end:
        yield curr
        prev,curr=curr,curr+prev

print(list(fib()))
</code></pre>
<p>输出结果：</p>
<pre><code class="language-python">[1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, 233, 377, 610, 987]
</code></pre>
<p>上面只是做了几个演示，这里具体说明一下:</p>
<p>当调用 iter 函数的时候，生成了一个迭代对象，要求<code>__iter__</code>必须返回一个实现了<code>__next__</code>的对象，我们就可以通过<code>next</code>函数访问这个对象的下一个元素了，并且在你不想继续有迭代的情况下抛出一个 StopIteration 的异常(for 语句会捕获这个异常，并且自动结束 for)，下面实现了一个自己的类似 range 函数的功能。</p>
<pre><code class="language-python">class MyRange(object):
    def __init__(self, end):
        self.start = 0
        self.end = end

    def __iter__(self):
        return self

    def __next__(self):
        if self.start &lt; self.end:
            ret = self.start
            self.start += 1
            return ret
        else:
            raise StopIteration

from collections.abc import *

a = MyRange(5)
print(isinstance(a, Iterable))
print(isinstance(a, Iterator))

for i in a:
    print(i)
</code></pre>
<p>输出结果是：</p>
<pre><code class="language-python">True
True
0
1
2
3
4
</code></pre>
<p>接下来我们使用 next 函数模拟一次：</p>
<pre><code class="language-python">class MyRange(object):
    def __init__(self, end):
        self.start = 0
        self.end = end

    def __iter__(self):
        return self

    def __next__(self):
        if self.start &lt; self.end:
            ret = self.start
            self.start += 1
            return ret
        else:
            raise StopIteration

a = MyRange(5)
print(next(a))
print(next(a))
print(next(a))
print(next(a))
print(next(a))
print(next(a)) # 其实到这里已经完成了，我们在运行一次查看异常
</code></pre>
<p>可以看见一个很明显的好处是，每次产生的数据，是产生一个用一个，什么意思呢，比如我要遍历[0, 1, 2, 3.....]一直到 10 亿，如果使用列表的方式，那么是会全部载入内存的，但是如果使用迭代器，可以看见，当用到了(也就是在调用了 next)才会产生对应的数字，这样就可以节约内存了，这是一种懒惰的加载方式。</p>
<h3 id="总结">总结<a class="anchor-link" href="#总结" title="Permanent link">&para;</a></h3>
<ol>
<li>可以使用<code>collection.abs</code>里面的<code>Iterator</code>和<code>Iterable</code>配合<code>isinstance</code>函数来判断一个对象是否是可迭代的，是否是迭代器对象。</li>
<li><code>iter</code>实际是映射到了<code>__iter__</code>函数。</li>
<li>只要实现了<code>__iter__</code>的对象就是可迭代对象(Iterable)，正常情况下，应该返回一个实现了<code>__next__</code>的对象(虽然这个要求不强制)，如果自己实现了<code>__next__</code>，当然也可以返回自己。</li>
<li>同时实现了<code>__iter__</code>和<code>__next__</code>的是迭代器(Iterator)，当然也是一个可迭代对象了，其中<code>__next__</code>应该在迭代完成后，抛出一个 StopIteration 异常。</li>
<li>for 语句会自动处理这个<code>StopIteration</code>异常以便结束 for 循环。</li>
</ol>
<h2 id="enumerate">enumerate()<a class="anchor-link" href="#enumerate" title="Permanent link">&para;</a></h2>
<p><code>enumerate</code> 是 Python 中的一个内置函数，用于将一个可遍历的数据对象（如列表、元组或字符串）组合为一个索引序列，同时列出数据和数据下标，一般用在 for 循环当中。</p>
<p><code>enumerate</code> 函数返回的是一个枚举对象，其中包含了元素及其索引（下标）。你可以通过遍历枚举对象来获取每个元素的索引和值。</p>
<p>以下是 <code>enumerate</code> 的基本用法：</p>
<pre><code class="language-python"># 示例：对一个列表使用 enumerate
my_list = ['apple', 'banana', 'cherry']

# 使用 enumerate 遍历列表
for index, value in enumerate(my_list):
    print(f&quot;Index: {index}, Value: {value}&quot;)

# 输出：
# Index: 0, Value: apple
# Index: 1, Value: banana
# Index: 2, Value: cherry
</code></pre>
<p>在这个例子中，<code>enumerate(my_list)</code> 生成了一个枚举对象，该对象在每次迭代时产生一个包含索引和值的元组。然后，通过解包这个元组到 <code>index</code> 和 <code>value</code> 变量中，我们可以在循环体内部同时访问到每个元素的索引和值。</p>
<p>此外，<code>enumerate</code> 函数还接受一个可选的 <code>start</code> 参数，用于指定索引的起始值：</p>
<pre><code class="language-python">my_list = ['apple', 'banana', 'cherry']

# 从索引 1 开始枚举
for index, value in enumerate(my_list, start=1):
    print(f&quot;Index: {index}, Value: {value}&quot;)

# 输出：
# Index: 1, Value: apple
# Index: 2, Value: banana
# Index: 3, Value: cherry
</code></pre>
<p>在这个例子中，我们指定 <code>start=1</code>，所以索引从 1 开始而不是默认的 0。</p>
<h2 id="logging-模块">logging 模块<a class="anchor-link" href="#logging-模块" title="Permanent link">&para;</a></h2>
<blockquote>
<p><code>logging</code> 是 Python 标准库中的一个模块，它提供了一套灵活且强大的日志系统。通过 <code>logging</code>，你可以记录程序中发生的事件，这对于调试、监控、分析以及理解程序行为都非常有帮助。</p>
</blockquote>
<h3 id="基本概念">基本概念<a class="anchor-link" href="#基本概念" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p><strong>日志级别</strong>：<code>logging</code> 模块定义了几个日志级别，包括 <code>DEBUG</code>、<code>INFO</code>、<code>WARNING</code>、<code>ERROR</code> 和 <code>CRITICAL</code>。每个级别都对应一个数字，数字越大，级别越高。通常，级别高的日志会包含级别低的日志信息。</p>
</li>
<li>
<p><strong>日志处理器</strong>（Handlers）：负责将日志记录（Log Record）发送到指定的目的地，比如文件、控制台、网络等。</p>
</li>
<li>
<p><strong>日志记录器</strong>（Loggers）：记录器是 <code>logging</code> 模块的核心部分，它负责处理日志记录。你可以为应用程序的不同部分创建不同的记录器。</p>
</li>
<li>
<p><strong>日志格式化器</strong>（Formatters）：用于定义日志的最终输出格式。</p>
</li>
</ol>
<h3 id="常用功能">常用功能<a class="anchor-link" href="#常用功能" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p><strong>配置日志</strong>：你可以使用 <code>basicConfig</code> 方法进行简单的日志配置，也可以手动创建记录器、处理器和格式化器进行更复杂的配置。</p>
</li>
<li>
<p><strong>记录日志</strong>：使用记录器的 <code>debug</code>、<code>info</code>、<code>warning</code>、<code>error</code> 和 <code>critical</code> 方法来记录不同级别的日志。</p>
</li>
<li>
<p><strong>日志传播</strong>：一个记录器可以有一个或多个处理器，如果处理器没有处理该记录，记录将被传递给该记录器的父记录器处理（如果存在的话）。</p>
</li>
<li>
<p><strong>线程安全</strong>：<code>logging</code> 模块是线程安全的，可以在多线程环境中使用。</p>
</li>
</ol>
<h3 id="示例_2">示例<a class="anchor-link" href="#示例_2" title="Permanent link">&para;</a></h3>
<p>下面是一个简单的 <code>logging</code> 示例：</p>
<pre><code class="language-python">import logging

# 配置日志的基本设置
logging.basicConfig(filename='app.log', level=logging.DEBUG,
                    format='%(asctime)s:%(levelname)s:%(message)s')

# 记录不同级别的日志
logging.debug('这是一条 debug 级别的日志')
logging.info('这是一条 info 级别的日志')
logging.warning('这是一条 warning 级别的日志')
logging.error('这是一条 error 级别的日志')
logging.critical('这是一条 critical 级别的日志')
</code></pre>
<p>在这个示例中，我们首先使用 <code>basicConfig</code> 方法配置了日志的基本设置，包括日志文件名、日志级别和日志格式。然后，我们使用不同级别的日志方法来记录日志。这些日志将被写入到 <code>app.log</code> 文件中。</p>
<h3 id="高级配置">高级配置<a class="anchor-link" href="#高级配置" title="Permanent link">&para;</a></h3>
<p>对于更复杂的日志需求，你可能需要手动创建记录器、处理器和格式化器，并使用 <code>addHandler</code> 方法将它们关联起来。例如，你可能希望将不同级别的日志记录到不同的文件中，或者将日志同时输出到控制台和文件。</p>
<p>总之，<code>logging</code> 模块是 Python 中非常强大且灵活的日志系统，它可以帮助你更好地管理、监控和调试你的应用程序。</p>
                </div>

                <!-- Comments Section (Giscus) -->
                <section class="comments-section">
                    <h3><i class="fas fa-comments"></i> 评论</h3>
                    <script src="https://giscus.app/client.js"
                        data-repo="Geeks-Z/Geeks-Z.github.io"
                        data-repo-id=""
                        data-category="Announcements"
                        data-category-id=""
                        data-mapping="pathname"
                        data-strict="0"
                        data-reactions-enabled="1"
                        data-emit-metadata="0"
                        data-input-position="bottom"
                        data-theme="preferred_color_scheme"
                        data-lang="zh-CN"
                        crossorigin="anonymous"
                        async>
                    </script>
                </section>
            </article>

            <footer class="post-footer">
                <p>© 2025 Hongwei Zhao. Built with ❤️</p>
            </footer>
        </main>
    </div>

    <!-- Theme Toggle Button -->
    <button class="theme-toggle" id="themeToggle" aria-label="切换主题">
        <i class="fas fa-moon"></i>
    </button>

    <script>
        // Theme Toggle
        const themeToggle = document.getElementById('themeToggle');
        const html = document.documentElement;
        const icon = themeToggle.querySelector('i');
        const hljsDark = document.getElementById('hljs-theme-dark');
        const hljsLight = document.getElementById('hljs-theme-light');
        
        // Check saved theme or system preference
        const savedTheme = localStorage.getItem('theme');
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        
        if (savedTheme === 'dark' || (!savedTheme && prefersDark)) {
            html.setAttribute('data-theme', 'dark');
            icon.className = 'fas fa-sun';
            hljsDark.disabled = false;
            hljsLight.disabled = true;
        }
        
        themeToggle.addEventListener('click', () => {
            const isDark = html.getAttribute('data-theme') === 'dark';
            if (isDark) {
                html.removeAttribute('data-theme');
                icon.className = 'fas fa-moon';
                localStorage.setItem('theme', 'light');
                hljsDark.disabled = true;
                hljsLight.disabled = false;
            } else {
                html.setAttribute('data-theme', 'dark');
                icon.className = 'fas fa-sun';
                localStorage.setItem('theme', 'dark');
                hljsDark.disabled = false;
                hljsLight.disabled = true;
            }
            
            // Update Giscus theme
            const giscusFrame = document.querySelector('iframe.giscus-frame');
            if (giscusFrame) {
                giscusFrame.contentWindow.postMessage({
                    giscus: {
                        setConfig: {
                            theme: isDark ? 'light' : 'dark'
                        }
                    }
                }, 'https://giscus.app');
            }
        });
        
        // Highlight.js
        document.addEventListener('DOMContentLoaded', () => {
            hljs.highlightAll();
        });
        
        // KaTeX auto-render
        document.addEventListener('DOMContentLoaded', () => {
            if (typeof renderMathInElement !== 'undefined') {
                renderMathInElement(document.body, {
                    delimiters: [
                        {left: '$$', right: '$$', display: true},
                        {left: '$', right: '$', display: false},
                        {left: '\\[', right: '\\]', display: true},
                        {left: '\\(', right: '\\)', display: false}
                    ],
                    throwOnError: false
                });
            }
        });
        
        // TOC active state
        const tocLinks = document.querySelectorAll('.toc-container a');
        const headings = document.querySelectorAll('.post-content h2, .post-content h3, .post-content h4');
        
        function updateTocActive() {
            let current = '';
            headings.forEach(heading => {
                const rect = heading.getBoundingClientRect();
                if (rect.top <= 100) {
                    current = heading.getAttribute('id');
                }
            });
            
            tocLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === '#' + current) {
                    link.classList.add('active');
                }
            });
        }
        
        window.addEventListener('scroll', updateTocActive);
        updateTocActive();
    </script>
</body>
</html>
